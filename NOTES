===========================
 Release notes for NAV 3.6
===========================
Please report bugs at https://bugs.launchpad.net/nav

If you are upgrading from versions of NAV older than 3.5, please refer
to the release notes of the in-between versions before reading any
further.


Upgrading from NAV 3.5
======================

Database changes
----------------
There are many database changes since NAV 3.5.  Before installing the new NAV
version, stop NAV, install, then upgrade the database schema using the
procedure documented in doc/sql/README.

Cricket and temperatures
------------------------
NAV 3.6 changes the way in which temperature values are collected.  Temperature
statistics were previously only supported for Cisco devices.  However, this
support was terribly broken, and you may already be experiencing problems with
this if you have upgraded to recent IOS versions.

Due to these changes, you will not be able to keep historic temperature data
for your Cisco devices (if you have any such data), but you need to follow a
specific procedure before attempting to start NAV 3.6:

1. Make sure Cricket is not running (`nav status cricket` and check ps output)

2. Make sure to backup all your RRD files and your cricket-config directory.

3. Run `migrate_cricket.py`. This will:

   - Delete cricket-related entries from NAV's RRD registry (don't worry, it
     will be filled again when the new makecricketconfig runs).

   - Remove any temperature-related data sources from your RRD files. This is
     done to remove the previously mentioned brokenness.

4. Remove old configuration files from the cricket-config directory. This is
   only necessary for:

   - Defaults
   - routers/*
   - router-interfaces/*
   - switches/*
   - switch-ports/*

5. Copy the new default cricket-config directory treec files to the
   cricket-config directory - these were installed in the doc directory under
   cricket/cricket-config (or can be found in the source under
   subsystem/statTools/cricket/cricket-config).

6. Make sure that the `datapath` in the top level `Defaults` file is correct
   and pointing to the directory where the RRD files are stored.

7. Run `extract_cricket_oids.py`.  This extracts OIDs from the cricket
   configuration tree and inserts them into NAV's OID registry.

You can now run `mcc.py` to create the new Cricket configuration from your
database contents.


Dependency changes
------------------
The following dependencies are new to NAV 3.6:

* Twisted >= 8.1
* twisted-snmp >= 0.3
* pysnmp-se >= 3.5

The following are no longer dependencies in NAV 3.6:

* Perl
* The Python module forgetSQL
* psycopg1 (but please keep psycopg2!)

A dependency to the python module pyrad was previously undocumented.
This module is required if you wish to monitor radius servers using
NAV's service monitor.  The module can be found at
http://www.wiggy.net/code/pyrad/ .


Files to remove
---------------
These files and directories should be removed from your installation
after the upgrade:

* TO BE DOCUMENTED *

These files and directories are all prefixed with /usr/local/nav/ in a
default configuration, but your mileage may vary.


