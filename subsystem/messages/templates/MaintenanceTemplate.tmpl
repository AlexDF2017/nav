##
## Copyright 2003, 2004 Norwegian University of Science and Technology
##
## This file is part of Network Administration Visualized (NAV)
##
## NAV is free software; you can redistribute it and/or modify
## it under the terms of the GNU General Public License as published by
## the Free Software Foundation; either version 2 of the License, or
## (at your option) any later version.
##
## NAV is distributed in the hope that it will be useful,
## but WITHOUT ANY WARRANTY; without even the implied warranty of
## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
## GNU General Public License for more details.
##
## You should have received a copy of the GNU General Public License
## along with NAV; if not, write to the Free Software
## Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
##
##
## $Id$
## Authors: Sigurd Gartmann <sigurd-nav@brogar.org>
##          Magnar Sveen <magnars@idi.ntnu.no>
##

#extends nav.web.templates.EmotdTemplate
#from nav.web.templates.TreeSelectTemplate import TreeSelectTemplate
#from nav.web.templates.SearchBoxTemplate import SearchBoxTemplate

#block content
$makeMenu2("Maintenance")
##$emotdid
<form action="$args['action']" method="post">
<h1>Maintenance Setup</h1>

#if $defined
$information()
#else
$new()
#end if

#set $emotdid = int($emotdid)
<br>
<div style="padding: 0px 0px 0px 10px;">

#if $emotdid > 0
#set $eq = $equipment[$emotdid]
$equipmentList($eq,$emotdid)
#end if
$equipmentList($newequipment)

$maint()

#if $args['submit']['enabled']
            <input type="submit" name="$args['submit']['control']" value="$args['submit']['value']">
#else
            <input disabled type="submit" name="$args['submit']['control']" value="$args['submit']['value']">
#end if

<p>
$makeDateTime("Start maintenance","maintstart",$maintstart[0],$maintstart[1],$maintstart[2],$maintstart[3],$maintstart[4])
</p>

<p>
$makeDateTime("End maintenance","maintend",$maintend[0],$maintend[1],$maintend[2],$maintend[3],$maintend[4])
</p>
</div>
</form>
<form action="$args['cancelaction']" method="post">
<input type="submit" name="$args['cancel']['control']" value=$args['cancel']['value'] />
</form>
<form action="$args['doneaction']" method="post">
<input type="submit" name="$args['done']['control']" value="$args['done']['value']" />
</form>
</div>
#end block


#def information
#if $messagetitle
<h2>$messagetitle</h2>
#end if
#if $messagedescription
<p>Description: $messagedescription</p>
#end if
#end def

#def new
<table style="font-size:11px;" cellspacing="10" cellpadding="0">
<tr><td colspan="3">
<label>Select message</label><br><select name="emotdid" onchange="this.form.submit()">
#if $emotdid==0:
	<option value="0" selected="1">Compose new message</option>
#else:
	<option value="0">Compose new message</option>
#end if

#for $b in $messagelist
#set $c = "["+$b[1]+"] "+$b[2]
#set $d = $c[0:80]
#if $emotdid==$b[0]
	<option value="$b[0]" selected="1">$d ...</option>
#else
	<option value="$b[0]">$d ...</option>
#end if
#end for
</select>
</td></tr>
<tr><td>
<label>Title: </label><br><input type="text" name="messagetitle" size=34 value="$messagetitle" />
</td><td>
<label>Type: </label><br><select name="messagetype">
#for $t in ("error","scheduled","info","internal")
#set selected = ''
#if $t==$messagetype
#set $selected = ' selected="1"'
#end if
<option value="$t"$selected>$t</option>
#end for
</select>
</td></tr><tr>
<td colspan=2>
<label>Description: </label><br><textarea name="messagedescription" cols="40" rows="3">$messagedescription</textarea>
</td>
<td style="padding: 0px 0px 0px 25px;" valign=bottom>
#set qs = SearchBoxTemplate()
    $qs.searchbox($args['searchbox'])
</td>
</tr></table>
#end def


#def maint
##$args['selectbox']
#set global path = [("Frontpage","/"),("Test","/")]
###set qs = SearchBoxTemplate()
#set ts = TreeSelectTemplate()
##    $qs.searchbox($args['searchbox'], False)
    $ts.treeselect($args['selectbox'])
#end def


