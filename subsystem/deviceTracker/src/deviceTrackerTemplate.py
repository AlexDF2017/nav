#!/usr/bin/env python

"""
Autogenerated by CHEETAH: The Python-Powered Template Engine
 CHEETAH VERSION: 0.9.15
 Generation time: Fri Jul 25 12:55:01 2003
   Source file: deviceTrackerTemplate.tmpl
   Source file last modified: Fri Jul 25 12:52:15 2003
"""

__CHEETAH_genTime__ = 'Fri Jul 25 12:55:01 2003'
__CHEETAH_src__ = 'deviceTrackerTemplate.tmpl'
__CHEETAH_version__ = '0.9.15'

##################################################
## DEPENDENCIES

import sys
import os
import os.path
from os.path import getmtime, exists
import time
import types
import __builtin__
from Cheetah.Template import Template
from Cheetah.DummyTransaction import DummyTransaction
from Cheetah.NameMapper import NotFound, valueForName, valueFromSearchList
import Cheetah.Filters as Filters
import Cheetah.ErrorCatchers as ErrorCatchers
from nav.web.templates.MainTemplate import MainTemplate
from tsTemplate import tsTemplate

##################################################
## MODULE CONSTANTS

try:
    True, False
except NameError:
    True, False = (1==1), (1==0)
VFS=valueFromSearchList
VFN=valueForName
currentTime=time.time

##################################################
## CLASSES

class deviceTrackerTemplate(MainTemplate):
    """
    
    Autogenerated by CHEETAH: The Python-Powered Template Engine
    """

    ##################################################
    ## GENERATED METHODS


    def __init__(self, *args, **KWs):
        """
        
        """

        MainTemplate.__init__(self, *args, **KWs)

    def content(self,
            trans=None,
            dummyTrans=False,
            VFS=valueFromSearchList,
            VFN=valueForName,
            getmtime=getmtime,
            currentTime=time.time,
            globals=globals,
            locals=locals,
            __builtin__=__builtin__):


        """
        Generated from #def content at line 7, col 1.
        """

        if not trans:
            trans = DummyTransaction()
            dummyTrans = True
        write = trans.response().write
        SL = self._searchList
        filter = self._currentFilter
        globalSetVars = self._globalSetVars
        
        ########################################
        ## START - generated method body
        
        if VFS(SL + [globals(), __builtin__],"page",1) == 'index':
            write('<h1>Device Tracker</h1>\n')
            write(filter(VFS(SL + [globals(), __builtin__],"args",1)['body'], rawExpr="$args['body']")) # from line 10, col 1.
            write('\n')
        if VFS(SL + [globals(), __builtin__],"page",1) == 'order':
            write(filter(VFS(SL + [globals(), __builtin__],"order",0)(), rawExpr='$order()')) # from line 13, col 1.
            write('\n')
        if VFS(SL + [globals(), __builtin__],"page",1) == 'addOrder':
            write(filter(VFS(SL + [globals(), __builtin__],"addOrder",0)(), rawExpr='$addOrder()')) # from line 16, col 1.
            write('\n')
        if VFS(SL + [globals(), __builtin__],"page",1) == 'registerOrder':
            write(filter(VFS(SL + [globals(), __builtin__],"registerOrder",0)(), rawExpr='$registerOrder()')) # from line 19, col 1.
            write('\n')
        if VFS(SL + [globals(), __builtin__],"page",1) == 'register':
            write(filter(VFS(SL + [globals(), __builtin__],"register",0)(), rawExpr='$register()')) # from line 22, col 1.
            write('\n')
        if VFS(SL + [globals(), __builtin__],"page",1) == 'history':
            write(filter(VFS(SL + [globals(), __builtin__],"history",0)(), rawExpr='$history()')) # from line 25, col 1.
            write('\n')
        if VFS(SL + [globals(), __builtin__],"page",1) == 'error':
            write(filter(VFS(SL + [globals(), __builtin__],"registerError",0)(VFS(SL + [globals(), __builtin__],"args",1)['errordevice']), rawExpr="$registerError($args['errordevice'])")) # from line 28, col 1.
            write('\n')
        if VFS(SL + [globals(), __builtin__],"page",1) == 'browse':
            write(filter(VFS(SL + [globals(), __builtin__],"browse",0)(), rawExpr='$browse()')) # from line 31, col 1.
            write('\n')
        if VFS(SL + [globals(), __builtin__],"page",1) == 'delete':
            write(filter(VFS(SL + [globals(), __builtin__],"delete",0)(), rawExpr='$delete()')) # from line 34, col 1.
            write('\n')
        if VFS(SL + [globals(), __builtin__],"page",1) == 'rma':
            write(filter(VFS(SL + [globals(), __builtin__],"showRma",0)(), rawExpr='$showRma()')) # from line 37, col 1.
            write('\n')
        if VFS(SL + [globals(), __builtin__],"args",1)['returnpath']:
            write('<p>\n    <a href="')
            write(filter(VFS(SL + [globals(), __builtin__],"args",1)['returnpath']['url'], rawExpr="$args['returnpath']['url']")) # from line 41, col 14.
            write('">')
            write(filter(VFS(SL + [globals(), __builtin__],"args",1)['returnpath']['text'], rawExpr="$args['returnpath']['text']")) # from line 41, col 42.
            write('</a>\n</p>\n')
        
        ########################################
        ## END - generated method body
        
        if dummyTrans:
            return trans.response().getvalue()
        else:
            return ""
        

    def additionalCSS(self,
            trans=None,
            dummyTrans=False,
            VFS=valueFromSearchList,
            VFN=valueForName,
            getmtime=getmtime,
            currentTime=time.time,
            globals=globals,
            locals=locals,
            __builtin__=__builtin__):


        """
        Generated from #def additionalCSS at line 46, col 1.
        """

        if not trans:
            trans = DummyTransaction()
            dummyTrans = True
        write = trans.response().write
        SL = self._searchList
        filter = self._currentFilter
        globalSetVars = self._globalSetVars
        
        ########################################
        ## START - generated method body
        
        
        ########################################
        ## END - generated method body
        
        if dummyTrans:
            return trans.response().getvalue()
        else:
            return ""
        

    def browse(self,
            trans=None,
            dummyTrans=False,
            VFS=valueFromSearchList,
            VFN=valueForName,
            getmtime=getmtime,
            currentTime=time.time,
            globals=globals,
            locals=locals,
            __builtin__=__builtin__):


        """
        Generated from #def browse() at line 49, col 1.
        """

        if not trans:
            trans = DummyTransaction()
            dummyTrans = True
        write = trans.response().write
        SL = self._searchList
        filter = self._currentFilter
        globalSetVars = self._globalSetVars
        
        ########################################
        ## START - generated method body
        
        if not (VFS(SL + [globals(), __builtin__],"args",1)['deviceHistList'] or VFS(SL + [globals(), __builtin__],"args",1)['errorDevice'] or VFS(SL + [globals(), __builtin__],"args",1)['rmaDevice']):
            write('<h2>Choose a netbox or a module</h2>\n')
            ts = tsTemplate()
            write('<form action="')
            write(filter(VFS(SL + [globals(), __builtin__],"args",1)['action'], rawExpr="$args['action']")) # from line 53, col 15.
            write('" method="post">\n    ')
            write(filter(VFN(ts,"treeselect",0)(VFS(SL + [globals(), __builtin__],"args",1)['selectbox']), rawExpr="$ts.treeselect($args['selectbox'])")) # from line 54, col 5.
            write('''
    <table>
        <tr>
''')
            if VFS(SL + [globals(), __builtin__],"args",1)['submit']['enabled']:
                write('            <td><input type="submit" name="')
                write(filter(VFS(SL + [globals(), __builtin__],"args",1)['submit']['control'], rawExpr="$args['submit']['control']")) # from line 58, col 44.
                write('" value="')
                write(filter(VFS(SL + [globals(), __builtin__],"args",1)['submit']['value'], rawExpr="$args['submit']['value']")) # from line 58, col 79.
                write('"></td>\n')
            else:
                write('            <td><input disabled type="submit" name="')
                write(filter(VFS(SL + [globals(), __builtin__],"args",1)['submit']['control'], rawExpr="$args['submit']['control']")) # from line 60, col 53.
                write('" value="')
                write(filter(VFS(SL + [globals(), __builtin__],"args",1)['submit']['value'], rawExpr="$args['submit']['value']")) # from line 60, col 88.
                write('"></td>\n')
            write('''        </tr>
    </table>
</form>
''')
        elif VFS(SL + [globals(), __builtin__],"args",1)['deviceHistList']:
            write(filter(VFS(SL + [globals(), __builtin__],"deviceHistory",0)(VFS(SL + [globals(), __builtin__],"args",1)['deviceHistList']), rawExpr="$deviceHistory($args['deviceHistList'])")) # from line 66, col 1.
            write('\n')
        elif VFS(SL + [globals(), __builtin__],"args",1)['errorDevice']:
            write(filter(VFS(SL + [globals(), __builtin__],"registerError",0)(VFS(SL + [globals(), __builtin__],"args",1)['errorDevice']), rawExpr="$registerError($args['errorDevice'])")) # from line 68, col 1.
            write('\n')
        elif VFS(SL + [globals(), __builtin__],"args",1)['rmaDevice']:
            write(filter(VFS(SL + [globals(), __builtin__],"registerRma",0)(VFS(SL + [globals(), __builtin__],"args",1)['rmaDevice']), rawExpr="$registerRma($args['rmaDevice'])")) # from line 70, col 1.
            write('\n')
        
        ########################################
        ## END - generated method body
        
        if dummyTrans:
            return trans.response().getvalue()
        else:
            return ""
        

    def order(self,
            trans=None,
            dummyTrans=False,
            VFS=valueFromSearchList,
            VFN=valueForName,
            getmtime=getmtime,
            currentTime=time.time,
            globals=globals,
            locals=locals,
            __builtin__=__builtin__):


        """
        Generated from #def order() at line 74, col 1.
        """

        if not trans:
            trans = DummyTransaction()
            dummyTrans = True
        write = trans.response().write
        SL = self._searchList
        filter = self._currentFilter
        globalSetVars = self._globalSetVars
        
        ########################################
        ## START - generated method body
        
        write('<h3>Active orders <a href="')
        write(filter(VFS(SL + [globals(), __builtin__],"args",1)['update'], rawExpr="$args['update']")) # from line 75, col 28.
        write('''">(update)</a></h3>
<table>
    <tr>
        <th>Order number</th>
        <th>Product</th>
        <th>Amount</th>
        <th>Ordered</th>
        <th>Dealer</th>
        <th>Ordered by</th>
        <th>Organisation</th>
        <th>Arrival</th>
    </tr>
''')
        for order in VFS(SL + [globals(), __builtin__],"args",1)['activeOrders']:
            write('    <tr>\n        <td>')
            write(filter(VFN(order,"orderNumber",1), rawExpr='$order.orderNumber')) # from line 89, col 13.
            write('</td>\n        <td>')
            write(filter(VFN(order,"product",1), rawExpr='$order.product')) # from line 90, col 13.
            write('</td>\n        <td>')
            write(filter(VFN(order,"amount",1), rawExpr='$order.amount')) # from line 91, col 13.
            write('</td>\n        <td>')
            write(filter(VFN(order,"orderTime",1), rawExpr='$order.orderTime')) # from line 92, col 13.
            write('</td>\n        <td>')
            write(filter(VFN(order,"dealer",1), rawExpr='$order.dealer')) # from line 93, col 13.
            write('</td>\n        <td>')
            write(filter(VFN(order,"orderedByPerson",1), rawExpr='$order.orderedByPerson')) # from line 94, col 13.
            write('</td>\n        <td>')
            write(filter(VFN(order,"orderedByOrg",1), rawExpr='$order.orderedByOrg')) # from line 95, col 13.
            write('</td>\n        <td><a href="register/')
            write(filter(VFN(order,"orderId",1), rawExpr='$order.orderId')) # from line 96, col 31.
            write('">Register arrival</a></td>\n    </tr>\n')
        write('''    <tr>
        <td><a href="add">Add new order</a></td>
        <td colspan="6"></td>
    </tr>
</table>
<h3>Order history</h3>
<table>
    <tr>
        <th>Order number</th>
        <th>Product</th>
        <th>Amount</th>
        <th>Ordered</th>
        <th>Arrived</th>
        <th>Dealer</th>
        <th>Ordered by</th>
        <th>Organisation</th>
    </tr>
    <tr>
    </tr>
''')
        for order in VFS(SL + [globals(), __builtin__],"args",1)['oldOrders']:
            write('    <tr>\n        <td>')
            write(filter(VFN(order,"orderNumber",1), rawExpr='$order.orderNumber')) # from line 120, col 13.
            write('</td>\n        <td>')
            write(filter(VFN(order,"product",1), rawExpr='$order.product')) # from line 121, col 13.
            write('</td>\n        <td>')
            write(filter(VFN(order,"amount",1), rawExpr='$order.amount')) # from line 122, col 13.
            write('</td>\n        <td>')
            write(filter(VFN(order,"orderTime",1), rawExpr='$order.orderTime')) # from line 123, col 13.
            write('</td>\n        <td>')
            write(filter(VFN(order,"arrivedTime",1), rawExpr='$order.arrivedTime')) # from line 124, col 13.
            write('</td>\n        <td>')
            write(filter(VFN(order,"dealer",1), rawExpr='$order.dealer')) # from line 125, col 13.
            write('</td>\n        <td>')
            write(filter(VFN(order,"orderedByPerson",1), rawExpr='$order.orderedByPerson')) # from line 126, col 13.
            write('</td>\n        <td>')
            write(filter(VFN(order,"orderedByOrg",1), rawExpr='$order.orderedByOrg')) # from line 127, col 13.
            write('</td>\n    </tr>\n')
        write(' \n</table>\n')
        
        ########################################
        ## END - generated method body
        
        if dummyTrans:
            return trans.response().getvalue()
        else:
            return ""
        

    def addOrder(self,
            trans=None,
            dummyTrans=False,
            VFS=valueFromSearchList,
            VFN=valueForName,
            getmtime=getmtime,
            currentTime=time.time,
            globals=globals,
            locals=locals,
            __builtin__=__builtin__):


        """
        Generated from #def addOrder() at line 134, col 1.
        """

        if not trans:
            trans = DummyTransaction()
            dummyTrans = True
        write = trans.response().write
        SL = self._searchList
        filter = self._currentFilter
        globalSetVars = self._globalSetVars
        
        ########################################
        ## START - generated method body
        
        write('<h2>Add order</h2>\n')
        if VFS(SL + [globals(), __builtin__],"args",1)['error']:
            write('<p style="color: #f00">')
            write(filter(VFS(SL + [globals(), __builtin__],"args",1)['error'], rawExpr="$args['error']")) # from line 137, col 24.
            write('</p>\n')
        write('<form action="')
        write(filter(VFS(SL + [globals(), __builtin__],"args",1)['action'], rawExpr="$args['action']")) # from line 139, col 15.
        write('''" method="post">
<table>
    <tr>
        <th>Product</th>
        <th>Number</th>
        <th>Organisation</th>
        <th>Dealer</th>
        <th>Ordernr</th>
    </tr>
    <tr>
        <td>
            <select name="cn_prodid">
''')
        for id, productno, descr in VFS(SL + [globals(), __builtin__],"args",1)['productList']:
            write('                <option value="')
            write(filter(id, rawExpr='$id')) # from line 152, col 32.
            write('">')
            write(filter(productno, rawExpr='$productno')) # from line 152, col 37.
            write('</option>\n')
        write('''            </select>
        </td>
        <td><input type="text" name="cn_number" size="3"></td>
        <td>
            <select name="cn_org">
''')
        for value, option in VFS(SL + [globals(), __builtin__],"args",1)['orgList']:
            write('                <option value="')
            write(filter(value, rawExpr='$value')) # from line 160, col 32.
            write('">(')
            write(filter(value, rawExpr='$value')) # from line 160, col 41.
            write(') ')
            write(filter(option, rawExpr='$option')) # from line 160, col 49.
            write('</option>\n')
        write('''            </select>
        </td>
        <td><input type="text" name="cn_dealer"></td>
        <td><input type="text" name="cn_ordernr"></td>
    </tr>
    <tr>
        <td colspan="5"><input type="submit" name="cn_submit" value="Add"></td>
    </tr>
</table>
</form>
''')
        
        ########################################
        ## END - generated method body
        
        if dummyTrans:
            return trans.response().getvalue()
        else:
            return ""
        

    def registerOrder(self,
            trans=None,
            dummyTrans=False,
            VFS=valueFromSearchList,
            VFN=valueForName,
            getmtime=getmtime,
            currentTime=time.time,
            globals=globals,
            locals=locals,
            __builtin__=__builtin__):


        """
        Generated from #def registerOrder() at line 175, col 1.
        """

        if not trans:
            trans = DummyTransaction()
            dummyTrans = True
        write = trans.response().write
        SL = self._searchList
        filter = self._currentFilter
        globalSetVars = self._globalSetVars
        
        ########################################
        ## START - generated method body
        
        write('<h2>Register arrival of order ')
        write(filter(VFS(SL + [globals(), __builtin__],"args",1)['orderid'], rawExpr="$args['orderid']")) # from line 176, col 31.
        write('</h2>\n')
        if VFS(SL + [globals(), __builtin__],"args",1)['error']:
            write('<p style="color: #f00">')
            write(filter(VFS(SL + [globals(), __builtin__],"args",1)['error'], rawExpr="$args['error']")) # from line 178, col 24.
            write('</p>\n')
        write('<form action="')
        write(filter(VFS(SL + [globals(), __builtin__],"args",1)['action'], rawExpr="$args['action']")) # from line 180, col 15.
        write('''" method="post">
    <table>
        <tr>
            <th>Product</th>
            <th>State</th>
            <th>Serial</th>
        </tr>
''')
        taborder = 1
        index = 0
        for event in VFS(SL + [globals(), __builtin__],"args",1)['events']:
            write('        <tr>\n            <td>')
            write(filter(VFN(event,"device.product.vendor.vendorid",1), rawExpr='$event.device.product.vendor.vendorid')) # from line 191, col 17.
            write(' ')
            write(filter(VFN(event,"device.product.productno",1), rawExpr='$event.device.product.productno')) # from line 191, col 55.
            write('</td>\n')
            if not VFN(event,"device.serial",1):
                write('            <td>            \n                <select name="cn_state">\n')
                for value, option in VFS(SL + [globals(), __builtin__],"args",1)['statelist']:
                    if value == VFS(SL + [globals(), __builtin__],"args",1)['states'][index]:
                        write('                    <option value="')
                        write(filter(value, rawExpr='$value')) # from line 197, col 36.
                        write('" selected>')
                        write(filter(option, rawExpr='$option')) # from line 197, col 53.
                        write('</option>\n')
                    else:
                        write('                    <option value="')
                        write(filter(value, rawExpr='$value')) # from line 199, col 36.
                        write('">')
                        write(filter(option, rawExpr='$option')) # from line 199, col 44.
                        write('</option>                   \n')
                write('                </select>\n            </td>\n            <td><input type="text" name="cn_serial" tabindex="')
                write(filter(taborder, rawExpr='$taborder')) # from line 204, col 63.
                write('"></td>\n')
            else:
                write('            <td>Arrived</td>\n            <td>')
                write(filter(VFN(event,"device.serial",1), rawExpr='$event.device.serial')) # from line 207, col 17.
                write('</td>\n')
            write('        </tr>\n')
            index = index + 1
            taborder = taborder + 1
        write('''        <tr>
            <td colspan="3"><input type="submit" name="cn_submit" value="Register"></td>
        </tr>
    </table>
</form>
''')
        
        ########################################
        ## END - generated method body
        
        if dummyTrans:
            return trans.response().getvalue()
        else:
            return ""
        

    def register(self,
            trans=None,
            dummyTrans=False,
            VFS=valueFromSearchList,
            VFN=valueForName,
            getmtime=getmtime,
            currentTime=time.time,
            globals=globals,
            locals=locals,
            __builtin__=__builtin__):


        """
        Generated from #def register() at line 220, col 1.
        """

        if not trans:
            trans = DummyTransaction()
            dummyTrans = True
        write = trans.response().write
        SL = self._searchList
        filter = self._currentFilter
        globalSetVars = self._globalSetVars
        
        ########################################
        ## START - generated method body
        
        write('<h2>Register new device</h2>\n')
        if VFS(SL + [globals(), __builtin__],"args",1)['error']:
            write('<p style="color: #f00">')
            write(filter(VFS(SL + [globals(), __builtin__],"args",1)['error'], rawExpr="$args['error']")) # from line 223, col 24.
            write('</p>\n')
        write('<form action="')
        write(filter(VFS(SL + [globals(), __builtin__],"args",1)['action'], rawExpr="$args['action']")) # from line 225, col 15.
        write('''" method="post">
    <table>
        <tr>
            <th>Product</th>
            <th>Serial</th>
        </tr>
        <tr>
            <td><select name="cn_prodid">
''')
        for id, productno, descr in VFS(SL + [globals(), __builtin__],"args",1)['productList']:
            write('                <option value="')
            write(filter(id, rawExpr='$id')) # from line 234, col 32.
            write('">')
            write(filter(productno, rawExpr='$productno')) # from line 234, col 37.
            write('</option>\n')
        write('''            </select></td>
            <td><input type="text" name="cn_serial"></td>
        </tr>
        <tr>
            <td colspan="3">
                <input type="submit" name="cn_submit" value="Register">
            </td>
        </tr>
    </table>
</form>
''')
        
        ########################################
        ## END - generated method body
        
        if dummyTrans:
            return trans.response().getvalue()
        else:
            return ""
        

    def history(self,
            trans=None,
            dummyTrans=False,
            VFS=valueFromSearchList,
            VFN=valueForName,
            getmtime=getmtime,
            currentTime=time.time,
            globals=globals,
            locals=locals,
            __builtin__=__builtin__):


        """
        Generated from #def history() at line 249, col 1.
        """

        if not trans:
            trans = DummyTransaction()
            dummyTrans = True
        write = trans.response().write
        SL = self._searchList
        filter = self._currentFilter
        globalSetVars = self._globalSetVars
        
        ########################################
        ## START - generated method body
        
        if VFS(SL + [globals(), __builtin__],"args",1)['deviceHistList']:
            write(filter(VFS(SL + [globals(), __builtin__],"deviceHistory",0)(VFS(SL + [globals(), __builtin__],"args",1)['deviceHistList']), rawExpr="$deviceHistory($args['deviceHistList'])")) # from line 251, col 1.
            write('\n')
        
        ########################################
        ## END - generated method body
        
        if dummyTrans:
            return trans.response().getvalue()
        else:
            return ""
        

    def deviceHistory(self,
            deviceHistList,
            trans=None,
            dummyTrans=False,
            VFS=valueFromSearchList,
            VFN=valueForName,
            getmtime=getmtime,
            currentTime=time.time,
            globals=globals,
            locals=locals,
            __builtin__=__builtin__):


        """
        Generated from #def deviceHistory($deviceHistList) at line 255, col 1.
        """

        if not trans:
            trans = DummyTransaction()
            dummyTrans = True
        write = trans.response().write
        SL = self._searchList
        filter = self._currentFilter
        globalSetVars = self._globalSetVars
        
        ########################################
        ## START - generated method body
        
        for device in deviceHistList:
            if VFN(device,"netboxId",1):
                write('<h3>Device history for netbox <a href="')
                write(filter(VFN(device,"url",1), rawExpr='$device.url')) # from line 258, col 40.
                write('">')
                write(filter(VFN(device,"sysname",1), rawExpr='$device.sysname')) # from line 258, col 53.
                write('</a></h3>\n')
            elif VFN(device,"moduleId",1):
                write('<h3>Device history for module ')
                write(filter(VFN(device,"module",1), rawExpr='$device.module')) # from line 260, col 31.
                write(' in netbox <a href="')
                write(filter(VFN(device,"url",1), rawExpr='$device.url')) # from line 260, col 65.
                write('">')
                write(filter(VFN(device,"sysname",1), rawExpr='$device.sysname')) # from line 260, col 78.
                write('</a></h3>\n')
            else:
                write('<h3>Device history for device ')
                write(filter(VFN(device,"deviceId",1), rawExpr='$device.deviceId')) # from line 262, col 31.
                write('</h3>\n')
            if VFN(device,"error",1):
                write('<p style="color: #f00">')
                write(filter(VFN(device,"error",1), rawExpr='$device.error')) # from line 265, col 24.
                write('</p>\n')
            else:
                write('''<table>
    <tr>
        <th>Event</th>
        <th>Time</th>
        <th>Description</th>
    </tr>
''')
                for sort_key, event in VFN(device,"events",1):
                    write('    <tr>\n        <td>')
                    write(filter(event['eventType'], rawExpr="$event['eventType']")) # from line 275, col 13.
                    write('</td>\n        <td>')
                    write(filter(event['time'], rawExpr="$event['time']")) # from line 276, col 13.
                    write('</td>\n        <td>')
                    write(filter(event['descr'], rawExpr="$event['descr']")) # from line 277, col 13.
                    write('</td>\n    </tr>\n')
                write('</table>\n')
                if VFN(device,"moduleevents",1):
                    write('<h3>Module history for <a href="')
                    write(filter(VFN(device,"url",1), rawExpr='$device.url')) # from line 282, col 33.
                    write('">')
                    write(filter(VFN(device,"sysname",1), rawExpr='$device.sysname')) # from line 282, col 46.
                    write('''</a></h3>
<table>
    <tr>
        <th>Event</th>
        <th>Time</th>
        <th>Description</th>
    </tr>
''')
                    for sort_key, event in VFN(device,"moduleevents",1):
                        write('    <tr>\n        <td>')
                        write(filter(event['eventType'], rawExpr="$event['eventType']")) # from line 291, col 13.
                        write('</td>\n        <td>')
                        write(filter(event['time'], rawExpr="$event['time']")) # from line 292, col 13.
                        write('</td>\n        <td>')
                        write(filter(event['descr'], rawExpr="$event['descr']")) # from line 293, col 13.
                        write('</td>\n    </tr>\n')
                    write('</table>\n')
        
        ########################################
        ## END - generated method body
        
        if dummyTrans:
            return trans.response().getvalue()
        else:
            return ""
        

    def registerError(self,
            device,
            trans=None,
            dummyTrans=False,
            VFS=valueFromSearchList,
            VFN=valueForName,
            getmtime=getmtime,
            currentTime=time.time,
            globals=globals,
            locals=locals,
            __builtin__=__builtin__):


        """
        Generated from #def registerError($device) at line 302, col 1.
        """

        if not trans:
            trans = DummyTransaction()
            dummyTrans = True
        write = trans.response().write
        SL = self._searchList
        filter = self._currentFilter
        globalSetVars = self._globalSetVars
        
        ########################################
        ## START - generated method body
        
        write('<h3>Register error situation</h3>\n<form action="')
        write(filter(VFS(SL + [globals(), __builtin__],"args",1)['action'], rawExpr="$args['action']")) # from line 304, col 15.
        write('''" method="post">
    <table>
        <tr>
''')
        if VFN(device,"netboxId",1):
            write('            <th>Register error situation for netbox ')
            write(filter(VFN(device,"sysname",1), rawExpr='$device.sysname')) # from line 308, col 53.
            write('</th>\n')
        elif VFN(device,"moduleId",1):
            write('            <th>Register error situation for module ')
            write(filter(VFN(device,"module",1), rawExpr='$device.module')) # from line 310, col 53.
            write(' in netbox ')
            write(filter(VFN(device,"sysname",1), rawExpr='$device.sysname')) # from line 310, col 78.
            write('</th>\n')
        else:
            write('            <th>Register error situation for device ')
            write(filter(VFN(device,"deviceId",1), rawExpr='$device.deviceId')) # from line 312, col 53.
            write('</th>\n')
        write('''        </tr>
        <tr>
            <td><input type="text" name="cn_error" size="60"></td>
        </tr>
        <tr>
            <td><input type="submit" name="cn_submit" value="Submit"></td>
        </tr>
    </table>
</form>
''')
        
        ########################################
        ## END - generated method body
        
        if dummyTrans:
            return trans.response().getvalue()
        else:
            return ""
        

    def showRma(self,
            trans=None,
            dummyTrans=False,
            VFS=valueFromSearchList,
            VFN=valueForName,
            getmtime=getmtime,
            currentTime=time.time,
            globals=globals,
            locals=locals,
            __builtin__=__builtin__):


        """
        Generated from #def showRma() at line 326, col 1.
        """

        if not trans:
            trans = DummyTransaction()
            dummyTrans = True
        write = trans.response().write
        SL = self._searchList
        filter = self._currentFilter
        globalSetVars = self._globalSetVars
        
        ########################################
        ## START - generated method body
        
        if VFS(SL + [globals(), __builtin__],"args",1)['rmaDevice']:
            write(filter(VFS(SL + [globals(), __builtin__],"registerRma",0)(VFS(SL + [globals(), __builtin__],"args",1)['rmaDevice']), rawExpr="$registerRma($args['rmaDevice'])")) # from line 328, col 1.
            write('\n')
        else:
            write('<h3>Active RMA events <a href="')
            write(filter(VFS(SL + [globals(), __builtin__],"args",1)['update'], rawExpr="$args['update']")) # from line 330, col 32.
            write('">(update)</a></h3>\n')
            if len(VFS(SL + [globals(), __builtin__],"args",1)['rmaList']):
                write('''<table>
    <tr>
        <th>Device</th>
        <th>Date</th>
        <th>Registered by</th>
        <th>Comment</th>
        <th></th>
        <th></th>
    </tr>
''')
                for device, date, username, comment, deviceid in VFS(SL + [globals(), __builtin__],"args",1)['rmaList']:
                    write('    <tr>\n        <td>')
                    write(filter(device, rawExpr='$device')) # from line 343, col 13.
                    write('</td>\n        <td>')
                    write(filter(date, rawExpr='$date')) # from line 344, col 13.
                    write('</td>\n        <td>')
                    write(filter(username, rawExpr='$username')) # from line 345, col 13.
                    write('</td>\n        <td>')
                    write(filter(comment, rawExpr='$comment')) # from line 346, col 13.
                    write('</td>\n        <td><a href="')
                    write(filter(VFS(SL + [globals(), __builtin__],"args",1)['returned']['url'], rawExpr="$args['returned']['url']")) # from line 347, col 22.
                    write(filter(deviceid, rawExpr='$deviceid')) # from line 347, col 46.
                    write('">')
                    write(filter(VFS(SL + [globals(), __builtin__],"args",1)['returned']['text'], rawExpr="$args['returned']['text']")) # from line 347, col 57.
                    write('</a></td>\n        <td><a href="')
                    write(filter(VFS(SL + [globals(), __builtin__],"args",1)['newreturned']['url'], rawExpr="$args['newreturned']['url']")) # from line 348, col 22.
                    write(filter(deviceid, rawExpr='$deviceid')) # from line 348, col 49.
                    write('">')
                    write(filter(VFS(SL + [globals(), __builtin__],"args",1)['newreturned']['text'], rawExpr="$args['newreturned']['text']")) # from line 348, col 60.
                    write('</a></td>\n    </tr>\n')
                write('</table>\n')
            write('<p><a href="')
            write(filter(VFS(SL + [globals(), __builtin__],"args",1)['addrma']['url'], rawExpr="$args['addrma']['url']")) # from line 353, col 13.
            write('">')
            write(filter(VFS(SL + [globals(), __builtin__],"args",1)['addrma']['text'], rawExpr="$args['addrma']['text']")) # from line 353, col 37.
            write('</a></p>\n')
        
        ########################################
        ## END - generated method body
        
        if dummyTrans:
            return trans.response().getvalue()
        else:
            return ""
        

    def registerRma(self,
            device,
            trans=None,
            dummyTrans=False,
            VFS=valueFromSearchList,
            VFN=valueForName,
            getmtime=getmtime,
            currentTime=time.time,
            globals=globals,
            locals=locals,
            __builtin__=__builtin__):


        """
        Generated from #def registerRma($device) at line 357, col 1.
        """

        if not trans:
            trans = DummyTransaction()
            dummyTrans = True
        write = trans.response().write
        SL = self._searchList
        filter = self._currentFilter
        globalSetVars = self._globalSetVars
        
        ########################################
        ## START - generated method body
        
        write('<h3>Register RMA</h3>\n')
        if VFS(SL + [globals(), __builtin__],"args",1)['error']:
            write('<p style="color: #f00">')
            write(filter(VFS(SL + [globals(), __builtin__],"args",1)['error'], rawExpr="$args['error']")) # from line 360, col 24.
            write('</p>\n')
        write('<form action="')
        write(filter(VFS(SL + [globals(), __builtin__],"args",1)['action'], rawExpr="$args['action']")) # from line 362, col 15.
        write('''" method="post">
    <table>
        <tr>
''')
        if VFN(device,"moduleId",1):
            write('            <th>Module</th>\n')
        write('''            <th>Netbox</th>
            <th>RMA number</th>
            <th>Comment</th>
        </tr>
        <tr>
''')
        if VFN(device,"moduleId",1):
            write('            <td>')
            write(filter(VFN(device,"module",1), rawExpr='$device.module')) # from line 374, col 17.
            write('</td>\n')
        write('            <td>')
        write(filter(VFN(device,"sysname",1), rawExpr='$device.sysname')) # from line 376, col 17.
        write('''</td>
            <td><input type="text" name="cn_rma"></td>
            <td><input type="text" name="cn_comment" size="60"></td>
        </tr>
    </table>
    <table>
        <tr>
            <td><input type="submit" name="cn_submit" value="Register"></td>
        </tr>
    </table>
</form>
''')
        
        ########################################
        ## END - generated method body
        
        if dummyTrans:
            return trans.response().getvalue()
        else:
            return ""
        

    def delete(self,
            trans=None,
            dummyTrans=False,
            VFS=valueFromSearchList,
            VFN=valueForName,
            getmtime=getmtime,
            currentTime=time.time,
            globals=globals,
            locals=locals,
            __builtin__=__builtin__):


        """
        Generated from #def delete() at line 390, col 1.
        """

        if not trans:
            trans = DummyTransaction()
            dummyTrans = True
        write = trans.response().write
        SL = self._searchList
        filter = self._currentFilter
        globalSetVars = self._globalSetVars
        
        ########################################
        ## START - generated method body
        
        write('<h3>Modules that have been down more than ')
        write(filter(VFS(SL + [globals(), __builtin__],"args",1)['threshold'], rawExpr="$args['threshold']")) # from line 391, col 43.
        write(' hours</h3>\n<form method="post" action="')
        write(filter(VFS(SL + [globals(), __builtin__],"args",1)['action'], rawExpr="$args['action']")) # from line 392, col 29.
        write('''">
    <table>
        <tr>
            <th>Select</th>
            <th>Module</th>
            <th>Sysname</th>
            <th>Down since</th>
        </tr>
''')
        for moduleid, module, sysname, downsince in VFS(SL + [globals(), __builtin__],"args",1)['deleteList']:
            write('        <tr>\n            <td><input type="radio" name="cn_moduleid" value="')
            write(filter(moduleid, rawExpr='$moduleid')) # from line 402, col 63.
            write('"></td>\n            <td>')
            write(filter(module, rawExpr='$module')) # from line 403, col 17.
            write('</td>\n            <td>')
            write(filter(sysname, rawExpr='$sysname')) # from line 404, col 17.
            write('</td>\n            <td>')
            write(filter(downsince, rawExpr='$downsince')) # from line 405, col 17.
            write('</td>\n        </tr>\n')
        write('''    </table>
    <table>
        <tr>
            <td><input type="submit" name="cn_delete" value="Delete"></td>
            <td><input type="submit" name="cn_rma" value="Register RMA"></td>
        </tr>
    </table>
</form>
''')
        
        ########################################
        ## END - generated method body
        
        if dummyTrans:
            return trans.response().getvalue()
        else:
            return ""
        

    def writeBody(self,
            trans=None,
            dummyTrans=False,
            VFS=valueFromSearchList,
            VFN=valueForName,
            getmtime=getmtime,
            currentTime=time.time,
            globals=globals,
            locals=locals,
            __builtin__=__builtin__):


        """
        This is the main method generated by Cheetah
        """

        if not trans:
            trans = DummyTransaction()
            dummyTrans = True
        write = trans.response().write
        SL = self._searchList
        filter = self._currentFilter
        globalSetVars = self._globalSetVars
        
        ########################################
        ## START - generated method body
        
        #  device tracker template
        #  dtTemplate.tmpl
        write('''

















''')
        
        ########################################
        ## END - generated method body
        
        if dummyTrans:
            return trans.response().getvalue()
        else:
            return ""
        
    ##################################################
    ## GENERATED ATTRIBUTES


    _mainCheetahMethod_for_deviceTrackerTemplate= 'writeBody'


# CHEETAH was developed by Tavis Rudd, Mike Orr, Ian Bicking and Chuck Esterbrook;
# with code, advice and input from many other volunteers.
# For more information visit http://www.CheetahTemplate.org

##################################################
## if run from command line:
if __name__ == '__main__':
    deviceTrackerTemplate().runAsMainProgram()

