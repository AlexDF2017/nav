{% extends 'threshold/base.html' %}

{% block content %}

{% regroup netboxes|dictsort:"sysname" by sysname as netbox_list %}

{% for netbox in netbox_list %}
<div class="netboxcontainer">
    <h3>
        <a href="/ipdevinfo/{{netbox.grouper}}/">{{ netbox.grouper }}</a>&nbsp;
            <img id="plus" class="toggler" src="/images/threshold/plus-button.png" alt="+"/>
            <img id="minus" class="toggler" src="/images/threshold/minus-button.png" alt="-" style="display: none;"/>
    </h3>
<table class="vertitable" style="display: none;">
    <thead>
    <tr>
        <th>Interface name</th>
        <th>Interface alias</th>
        <th>Description</th>
        <th>Operator</th>
        <th>Threshold</th>
        <th>Max</th>
        <th>Thresholdstate</th>
        <th>&nbsp;</th>
    </tr>
    </thead>
    <tbody>
    {% for item in netbox.list %}
        {% for threshold in item.sources %}
        <tr>
                {% if threshold.rrd_file.interface %}
                <td><a href="/portadmin/interfaceid={{threshold.rrd_file.interface.id}}">{{ threshold.rrd_file.interface.ifname }}</a></td>
                <td><a href="/portadmin/interfaceid={{threshold.rrd_file.interface.id}}">{{ threshold.rrd_file.interface.ifalias }}</a></td>
                {% else %}
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                {% endif %}
                <td><span title="{{ threshold.extra_descr }}">{{ threshold.description }}</span></td>
                <td>
                    <select id="operator" name="operator">
                        <option value=">">Greater than</option>
                        <option value="<">Less than</option>
                    </select>
                </td>
                <td><input class="thresholdvalue" type="text" value="{{ threshold.threshold }}"></td>
                <td class="maxvalue">{% if threshold.max %} {{ threshold.max }}{% endif %}</td>
                <td>{% if threshold.state %} {{ threshold.state }} {% endif %}</td>
                <td data_dsid="{{threshold.id}}"><input class="button" type="button" value="Update" /></td>
        <tr>
        {% endfor %}
    {% endfor %}
</tbody>
</table>
</div>
{% endfor %}
{% endblock %}

