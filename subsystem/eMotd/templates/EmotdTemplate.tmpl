#extends nav.web.templates.MainTemplate

#attr numberOfMessagesShown = 15

#block errormessage
#end block

#def $makeMenu
<div style="float:left">
##	<h1 style="font-size:14;">Emotd Menu</h1>
	<ul style="list-style-type:none;marin=0;padding:0;">
#for $item in $menu:
		<li><a href="$item.link">$item.text</a></li>
#end for
	</ul>
</div>
#end def


#def $makeFormField($type,$name,$val="",$label=None,$star=None)

#if $label
<label>$label</label>#slurp
#end if
#if $star
<span style="color:red;">*</span>#slurp
#end if
#if $type == "tinytextarea"
<textarea name="$name" cols="30" rows="5">$val</textarea>
#elif $type == "tinyshorttextarea"
<textarea name="$name" cols="30" rows="2">$val</textarea>
#elif $type == "textarea"
<textarea name="$name" cols="50" rows="5">$val</textarea>
#else
<input type="$type" name="$name" value="$val" />
#end if

#end def

#def $makeDateTime($label,$prefix,$year,$month,$day,$hour,$minute)

<label>$label</label>
<select name="${prefix}_year">
#for y in range(2004,2020)
<option value="$y" #slurp
#if $y==$year
selected="1" #slurp
#end if
>$y</option>
#end for
</select>

#set $months = ("January","February","March","April","May","June","July","August","September","October","November","December")

<select name="${prefix}_month">
#for m in range(1,13)
<option value="$m" #slurp
#if $m==$month
selected="1" #slurp
#end if
>$months[$m-1]</option>
#end for
</select>

<select name="${prefix}_day">
#for d in range(1,32)
<option value="$d" #slurp
#if $d==$day
selected="1" #slurp
#end if
>$d</option>
#end for
</select>

<label>at</label>

<select name="${prefix}_hour">
#for h in range(0,24)
<option value="$h" #slurp
#if $h==$hour
selected="1" #slurp
#end if
>$h</option>
#end for
</select>

<select name="${prefix}_minute">
#for m in range(0,60,5)
<option value="$m" #slurp
#if $m==$minute
selected="1" #slurp
#end if
#if $m < 10
#set $m = "0"+str($m)
#end if
>$m</option>
#end for
</select>

#end def

#def equipmentList($eq,$emotdid=0)
#if len($eq) and len($eq.keys()):
	<ul>
#for a,b in $eq.items():
#for c in $b:
	<li>$a $c[1] #slurp
#if $emotdid
(<a href="/emotd/remove/$emotdid/?$a=$c[0]">remove</a>)#slurp
#elif $emotdid==0:
(<a href="/emotd/remove/?$a=$c[0]">remove</a>)#slurp
#end if
</li>
#end for
#end for
	</ul>
#end if
#end def

#def maintList

Maintenance List
#if len($maints) == 0
No maintenance info.
#end if
  <!-- Here comes the actual information regarding maintenance information -->
  <table>
  <tr>
    <th>On Maintenance</th>
    <th>Title</th>
    <th>Start</th>
    <th>End</th>
  </tr>
  #for $message in $maints
  <tr>
##    <td><a href="/report/netbox?roomid=$message.roomid">$message.roomid ($message.roomdesc)</td>
##    <td><a href="/browse/$message.netboxid">$message.netboxid</a></td>
##    <td><a href="/browse/service/$message.serviceid">$message.serviceid</a></td>
##    <td>$message.mstart</td>
##    <td>$message.mend</td>
##    <td><a href="/emotd/view=$message.emotdid">$message.title</a></td>
#if $message.key == 'room'
    <td><a href="/report/netbox?roomid=$message.value">$message.description</td>
#elif $message.key == 'location'
    <td><a href="/report/room?locationid=$message.value">$message.description</td>
#elif $message.key == 'netbox'
    <td><a href="/browse/$message.value">$message.description</a></td>
#elif $message.key == 'module'
    <td><a href="/report/module?moduleid=$message.value">$message.description</td>
#elif $message.key == 'service'
    <td><a href="/browse/service/$message.value">$message.description</a></td>
#end if
    <td><a href="/emotd/view/$message.emotdid">$message.title</a></td>
    <td>$message.start</td>
    <td>$message.end</td>
  </tr>
  #end for
  </table>
#end def
