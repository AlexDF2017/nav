{% extends "alertprofiles/base_detail.html" %}

{% block url_edit %}{% url alertprofiles-profile-save %}{% endblock %}
{% block url_remove_expresion %}{% url alertprofiles-filters-removeexpresion %}{% endblock %}
{% block url_add_expresion %}{% url alertprofiles-filters-addexpresion %}{% endblock %}

{% block captioncontent %}
    {% if detail_id %}
       Profile details 
    {% else %}
        New profile
    {% endif %}
{% endblock %}

{% block expresions_caption_content  %}
    Time periods
{% endblock %}

{% block expresions_thead_cols %}
    <th></th>
    <th>Start time</th>
    <th>Valid during</th>
    <th>Subscriptions</th>
{% endblock %}

{% block expresions_tbody_content %}
    {% for a in alert_subscriptions %}
    <tr class="{% cycle oddrow,evenrow %}">
        <td><input type="checkbox" name="period" id="id_period_{{ a.time_period.id }}" /></td>
        <td><label for="id_period_{{ a.time_period.id }}">{{ a.time_period.start }}</label></td>
        <td>{{ a.time_period.get_valid_during_display }}</td>
        <td>
            <ul>
            {% for b in a.alert_subscriptions %}
                <li>
                    Watch <em>{{ b.filter_group }}</em>,
                    send to <em>{{ b.alert_address.address }}</em>
                </li>
            {% endfor %}
                <li><a href="{% url alertprofiles-profile-timeperiod-setup a.time_period.id %}"
                    >Edit subscriptions</a></li>
            </ul>
        </td>
    </tr>
    {% endfor %}
{% endblock %}

{% block addexpresion %}
<div class="infobox">
    <h4>Add new time period</h4>
    Time period from {{ time_period_form.start }}
    for {{ time_period_form.valid_during }}
    {{ block.super }}
</div>
{% endblock %}
