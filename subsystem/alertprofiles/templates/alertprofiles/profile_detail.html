{% extends "alertprofiles/base_detail.html" %}

{% block url_edit %}{% url alertprofiles-profile-save %}{% endblock %}
{% block url_add_expresion %}{% url alertprofiles-profile-timeperiod-add %}{% endblock %}

{% block headercontent %}
    {% if detail_id %}
       Profile details 
    {% else %}
        New profile
    {% endif %}
{% endblock %}

{% block form_additional_fields %}
{% if time_period_templates %}
<tr>
    <th>
        <label for="id_template">Choose a template for time periods:</label>
    </th>
    <td>
        <select name="template" id="id_template">
            <option value="">No template</option>
            {% for key, template in time_period_templates.items %}
                <option value="{{ key }}">{{ template.main.description }}</option>
            {% endfor %}
        </select>
    </td>
</tr>
{% endif %}
{% endblock %}

{% block expresions_caption_content  %}
    Time periods
{% endblock %}

{% block expresions %}
<form action="{% url alertprofiles-profile-timeperiod-remove %}" method="post">
    {% include "alertprofiles/timeperiods.html" %}
    <p>
        <button type="submit">Delete selected</button>
    </p>
</form>
{% endblock %}

{% block addexpresion %}
<div class="infobox">
    <h4>Add new time period</h4>
    {{ time_period_form.non_field_errors }}
    {{ time_period_form.start.errors }}
    {{ time_period_form.valid_during.errors }}
    Time period from {{ time_period_form.start }}
    for {{ time_period_form.valid_during }}
    {{ time_period_form.profile }}
    <p>
        <button type="submit">Add</button>
    </p>
</div>
{% endblock %}
