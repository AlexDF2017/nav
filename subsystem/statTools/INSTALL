INSTALL INSTRUCTIONS FOR CRICKET AND MAKECRICKETCONFIG
======================================================

Contact: John Magne Bredal <bredal@itea.ntnu.no>
Version: ALFA


DOWNLOAD
========

Cricket v.1.0.3 should be available from the local ftp-server. If not,
the official release can be found here:

FTP: ftp://download.sourceforge.net/pub/sourceforge/cricket/cricket-1.0.3.tar.gz
HTTP: http://download.sourceforge.net/cricket/cricket-1.0.3.tar.gz

The rest of the files are available from the NAV-v3 bundle.


DEPENDENCIES
============

Cricket is dependent on the following modules:
MD5                CPAN: by-authors/id/GAAS/Digest-MD5-*.tar.gz
LWP                CPAN: by-authors/id/GAAS/libwww-perl-*.tar.gz
DB_File            CPAN: by-authors/id/PMQS/DB_File-*.tar.gz
Date::Parse        CPAN: by-authors/id/GBARR/TimeDate-*.tar.gz
Time::HiRes        CPAN: by-authors/id/DEWEG/Time-HiRes-*.tar.gz
SNMP_Session       http://www.switch.ch/misc/leinen/snmp/perl
RRD                http://ee-staff.ethz.ch/~oetiker/webtools/rrdtool

The other scripts are dependent on modules that should already be
installed in NAV-v3.

LOCATION OF INSTALL
===================

Cricket should be installed in a directory called cricket. Where you
put Cricket it totally up to the installer, as long as all the needed
directories are created (or symlinked) in this directory. The
following steps should make sure it is properly installed:

Prepare the install
-------------------

We will here install Cricket in a directory called cricket located in
the home directory to the navcron user. This is just a suggestion, you
may put Cricket in whatever directory you find suitable.

- log in as navcron-user
cd ~
mkdir cricket
cd cricket

- copy cricket to this directory
cp /path/to/cricket/cricket-1.0.3.tar.gz .

- unzip/untar
tar xvzf cricket-1.0.3.tar.gz
ln -s cricket-1.0.3 cricket

Install
-------
cd ~/cricket/cricket
sh configure
cp cricket-config.pl.sample cricket-config.pl

- edit cricket-config.pl and make sure the following parameters are
  set or use the file in the NAV-package (this is all that is needed
  in the file):

	package Common::global;
	$gCricketHome = "/home/navcron/cricket";
	$gInstallRoot = "$gCricketHome/cricket";
	$gConfigRoot = "$gCricketHome/cricket-config";
	$gDbAccess = "slurp";   # Slurp the database into memory


Linking the correct directories
-------------------------------
cd ~/cricket

- public_html is the location of the webstuff
mkdir public_html
cd public_html
ln -s ../cricket/images
ln -s ../cricket/grapher.cgi
ln -s ../cricket/lib
ln -s ../cricket/mini-graph.cgi
ln -s ../cricket/VERSION
ln -s grapher.cgi index.cgi
cp TRUNK/subsystem/statTools/cricket/public_html/cricket.css .

- all the rrds are stored in cricket-data
mkdir /usr/local/nav/navme/cricket/cricket-data
ln -s /usr/local/nav/navme/cricket/cricket-data

- all the config are stored in cricket-config
mkdir /usr/local/nav/navme/cricket/cricket-config
ln -s /usr/local/nav/navme/cricket/cricket-config
cd cricket-config
cp -r TRUNK/subsystem/statTools/cricket-config .

NAV-v3 has it's own install-script for installing some of the
proprietary scripts and patches for Cricket. Run the install-script to
make sure that all the correct steps are made.  

---
ALFANOTE: The following step will not be necessary depending on if
getDeviceData has been run. This script might become obsolete. It
SHOULD be safe to run it, but the advice is not to run it. Make sure
gDD has been run, and skip to the compile script.

./filltypesnmpoid.pl

END OF ALFANOTE
---

~/cricket/cricket/compile
./makecricketconfig

Running for the first time
--------------------------
cd ~/cricket/cricket

- edit the subtree-sets file and make sure the following text are in
  (or use the file distributed with NAV-v3):
  "
  base: cricket-config
  logdir: cricket-logs
  set normal:
       /routers
       /switches
       /switch-ports
       /router-interfaces
  set giga:
       /giga-router-interfaces
       /giga-switch-ports
  "
- run nav start cricket to put the correct jobs into cron (you must be
  root to do this)
