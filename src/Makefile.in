##
## Attempted Makefile for Java subsystems
## 
SHELL = @SHELL@
prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = @bindir@
libdir = @libdir@
javalibdir = @javalibdir@
sysconfdir = @sysconfdir@
localstatedir = @localstatedir@

BUILDARGS = -Dprefix=$(prefix) -Dbindir=$(bindir) -Djavalibdir=$(javalibdir) -Dsysconfdir=$(sysconfdir) -Dlocalstatedir=$(localstatedir)
INSTALLARGS = -Dprefix=$(DESTDIR)$(prefix) -Dbindir=$(DESTDIR)$(bindir) -Djavalibdir=$(DESTDIR)$(javalibdir) -Dsysconfdir=$(DESTDIR)$(sysconfdir) -Dlocalstatedir=$(DESTDIR)$(localstatedir)

subdirs = \
	ConfigParser \
	Database \
	Event \
	eventEngine \
	getBoksMacs \
	getDeviceData \
	Logger \
	NetboxInfo \
	SimpleSnmp \
	Util \
	webapps/navAdmin

ANT = @ANT@

all: $(subdirs)

$(subdirs): .
	@echo "Building $@ ..."
	(cd $@ && $(ANT) $(BUILDARGS)) && touch $@

.:
	touch .

install:
	@for dir in $(subdirs); do \
	  echo "Installing $$dir ..."; \
	  (cd $$dir && $(ANT) install $(INSTALLARGS)) || exit 1; \
	done

clean:
	rm -f *~ .lastbuild
	@for dir in $(subdirs); do \
	  echo "Entering $$dir ..."; \
	  (cd $$dir && $(ANT) $@) || exit 1; \
	done

distclean:
	@echo Target distclean is not supported in the java projects, but should be...
