# boxState-events are generated when a netbox stops responding to ping requests
# serviceState-events are generated when a service stops working
#
# The format of this file:
#
# eventtypeid {
#   alerttype {
#     media {
#       lang {
#         <msg>
#       }
#     }
#     media {
#       lang: <msg>
#     }
#   }
# }
#
# NOTE! Do not use TABs in this file; the result will not be pretty.
#
# Variables in <msg> are written $<variabelnavn>, e.g. $sysname
# The avilable variables depend on the plugin servicing the event;
# however all fields from device, netbox, type, room and location
# can be assumed present. For serviceState this includes all fields
# in the service and serviceproperty tables.
#
# If an alerttype is not found, eventEngine will look for default[Start|End]
#
#
# For parser testing purposes:
# e { a { m { w { w } } } }

boxState {
  boxDownWarning {
    email {
      no {
        Subject: Boks $sysname svarer ikke paa ping
        Dette er en automatisk generert melding fra NAV:

        Boks $sysname ($ip) svarer ikke paa ping og vil snarlig bli deklarert nede
        dersom situasjonen ikke endres. Registrert $time.
      }
      en {
        Subject: Box $sysname  does not reply to ping requests.
        This is an automatically generated message from NAV:

        Box $sysname ($ip) does not reply to ping request and will be declared down soon
        if the situation does not change. Detected $time. 
      }
    }
    sms {
      no: Boks $sysname svarer ikke paa ping siden $time.
      en: Box $sysname does not reply to ping since $time.
    }
  }
  boxDown {
    email {
      no {
        Subject: Boks $sysname er nede
        Dette er en automatisk generert melding fra NAV:

        Boks $sysname ($ip) nede siden $time.
      }
      en {
        Subject: Box $sysname is down
        This is an automatically generated message from NAV:

        Box $sysname ($ip) is down since $time.
      }
    }
    sms {
      no: Boks ned $sysname ($ip)
      en: boxDown $sysname ($ip)
    }
  }
  boxUp {
    email {
      no {
        Subject: Boks $sysname er oppe
        Dette er en automatisk generert melding fra NAV:

        Boks $sysname ($ip) oppe siden $time.
      }
      en {
        Subject: Box $sysname is up
        This is an automatically generated message from NAV:

        Box $sysname ($ip) is up since $time.
      }
    }
    sms {
      no: Boks opp $sysname ($ip)
      en: boxUp $sysname ($ip)
    }
  }
  boxShadow {
    sms {
      no: Boks skygge $sysname ($ip)
      en: boxShadow $sysname ($ip)
    }
  }
  boxSunny {
    sms {
      no: Boks opp fra skygge $sysname ($ip)
      en: boxSunny $sysname ($ip)
    }
  }
  # Denne sendes ut dersom NAV-boksen mister kontakt med sin ruter
  netUnreachable {
    email {
      no: Ikke kontakt med ruter, varsling nede!
      en: Connection with router lost, alert service down!
    }
  }
}
# moduleState ...
moduleState {
  moduleDown {
    sms {
      no: Module $module, boks $sysname er i nede siden $time.
      en: Module $module, box $sysname is down since $time.
    }
    email {
      ting {
        hei
      }
    }
  }
  moduleUp {
    sms {
      no: Module $module, boks $sysname er oppe siden $time.
      en: Module $module, box $sysname is up since $time.
    }
  }
}

serviceState {
  #dc
  #dns
  httpDown {
    sms {
      no: HTTP-server på boks $sysname er nede siden $time.
    }
  }
  httpUp {
    sms {
      no: HTTP-server på boks $sysname er oppe siden $time.
    }
  }
  #imap
  #pop3
  #rpc
  #smb
  #smtp
  #ssh
  defaultStart {
    sms {
      no: Tjeneste $handler på boks $sysname er nede siden $time.
      en: Service $handler on $sysname is down since $time
    }
    email {
      no {
        Subject: Tjeneste $handler er nede på $sysname
        Dette er en automatisk generert melding fra NAV:

        Tjeneste $handler på $sysname er nede siden $time.
        Server oppe: $deviceup
        Melding: $descr
      }
      en {
        Subject: Service $handler is down on $sysname
        Service $handler on $sysname is down since $time.
        Server up: $deviceup
        Status: $descr
     }
    }
  }
  defaultEnd {
    sms {
      no: Tjeneste $handler på boks $sysname er oppe siden $time.
      en: Service $handler on $sysname is up since $time
    }
    email {
      no {
        Subject: Tjeneste $handler er oppe på $sysname
        Dette er en automatisk generert melding fra NAV:

        Tjeneste $handler på $sysname er oppe siden $time.
        Server oppe: $deviceup
        Melding: $descr
      }
      en {
        Subject: Service $handler is up on $sysname
        Service $handler on $sysname is up since $time.
        Server up: $deviceup
        Status: $descr
      }
    }
  }
}

# maintenanceState ...
maintenanceState {
  onMaintenance {
    sms {
      no: Boks $sysname er nå på vedlikehold siden $time.
      en: Box $sysname is on maintenance since $time.
    }
    email {
      ting {
        hei
      }
    }
  }
  offMaintenance {
    sms {
      no: Boks $sysname er nå av vedlikehold siden $time.
      en: Box $sysname is off maintenance since $time.
    }
  }
}

# thresholdState ...
thresholdState {
  exceededThreshold {
    sms {
      no: Threshold ($descr, $threshold) for boks $sysname har blitt oversteget siden $time.
      en: Threshold ($descr, $threshold) for boks $sysname has been exceeded since $time.
    }
    email {
      ting {
        hei
      }
    }
  }
  belowThreshold {
    sms {
      no: Threshold ($descr, $threshold) for boks $sysname er under grensen siden $time.
      en: Threshold ($descr, $threshold) for boks $sysname is blow the limit since $time.
    }
  }
}

