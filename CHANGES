Version 3.2.2
(released xx April 2007)

 Bugfixes:

  * SF#1550393 (Hardware version flipping back and forth on devices)
  * SF#1588465 (moduleState quarantine does not work)
  * SF#1669763 (Port numbers are wrong on CatOS switches)
  * SF#1669975 (Cisco VLAN interfaces are not properly ignored as swports)
  * SF#1675508 (getDeviceData produces OutOfMemoryErrors and freaks out)
  * SF#1680004 (EditDB crashes when adding a room that already exists)
  * SF#1681256 (t1000.pl refers to non-existant database fields)
  * SF#1689137 (The OID tester ignores responses with empty strings)
  * SF#1697527 (NAV daemons don't properly re-open log files on SIGHUP)
  * SF#1699058 (The SMS daemon dies on temporary dispatcher failures)
  * SF#1699068 (smsd/gammu doesn't see that SMS was successfully sent)
  * SF#1702800 (The IP Device Center does not properly flag disabled ports)
  * SF#1677074 (Router temperature over 300M degrees Celsius in Cricket)
  * SF#1702860 (EditDB crashes when attempting to add a service)
  * SF#1661395 (SMSD's BoostDispatcher crashes)
  * SF#1704164 (Confusing label "Last seen on switch" in IP info center)

 Also various other small improvements.

Version 3.2.1
(released 16 February 2007)

 Bugfixes:

  * SF#1661327 (Makecricketconfig uses 64-bit counters where not supported)
  * SF#1660516 (eventEngine does not work in NAV 3.2.0)
  * SF#1649947 (My SMS crashes if user has no sms alert address)
  * SF#1661381 (SMSD's database queue fails with SQL syntax error)

Version 3.2.0
(released 02 February 2007)

#####################################################################
##  WARNING  WARNING  WARNING  WARNING  WARNING  WARNING  WARNING  ##
#####################################################################
##                                                                 ##
## This release makes changes to the NAV database. If you are      ##
## upgrading from a previous release you also need to upgrade your ##
## database schema. For information on how to upgrade the database ##
## schema, please take a look in doc/sql/upgrades for more         ##
## information.                                                    ##
##                                                                 ##
#####################################################################

 New features and improvements:

  * New messages and maintenance web tools, rewritten from scratch, replace the
    old messages system. The maintenance tool features a calendar for ease of
    use.

  * SMS Daemon rewritten in Python, now extensible with dispatcher plugins.
    Existing plugins for Gammu, Boost Communications (www.boostcom.no) and
    e-mail gateways.

  * New link from alert profiles enables users to see their own SMS queues.

  * More information and links in the IP Device Browser. Among other things:
    New color for 10gig ports, displays serial number, displays software
    version and displays "first discovered by NAV" time.

  * Full description (ifAlias) string now stored for gwports too.

  * All reports have been revised.  A new report lists unrecognized CDP
    neighbours seen by NAV.  Reports now display 1000 rows per page by default,
    instead of 100.

  * The status page now shows devices and services on maintenance.

  * A new tool to show ranked statistical data collected by NAV/Cricket.
    Useful for checking which routers/switches have the highest CPU
    utilization, which interfaces have the most traffic, etc.

  * NAV now configures Cricket to utilize 64-bit traffic counters where
    applicable, preventing counter wrap-around problems for saturated links and
    reducing collection frequency for gigabit interfaces from once a 1 minute
    to once every 5 minutes.

  * Room IDs can now be changed in EditDB

  * The OID tester component of getDeviceData now runs faster, by not issuing
    unnecessary indexed community snmp queries.

  * New About-page in web interface.

  * HTML templates restructured, much of the web interface will now validate as
    XHTML 1.0 Transitional.

  * NAV installation can now properly report its own version number.

  * JVM options can now be configured individually for Java bases subsystems in
    nav.conf.  Java subsystems can now also be configured to use an alternate
    JVM installation using the JAVA_HOME variable in nav.conf.

  * Cleaned up output from nav start/stop/status commands, to increase
    legibility.

  * Removed gDD dependency on the system's /usr/bin/host program.

  * Arplogger now ignores routers that are known to be down, instead of spewing
    SNMP query errors by e-mail.

  * IP Devices can now be deleted directly from the Edit IP Device form in
    EditDB.

  * Nice, new icons for several web tools, now with SVG source files.

 Bugfixes:

  * Many SQL errors related to missing tables in FROM clauses fixed.

  * Fixed bug #1551839 (Cannot change IP address in EditDB)
  
  * Fixed bug #1602315 (EditDB crashes when attempting to delete rooms in use)

  * Fixed bug #1643321 (EditDB crashes when entering invalid IP address)

  * Fixed bug which crashed EditDB when devices returned SNMP Integer values as
    serial numbers.

  * Arnold now properly blocks switch ports on HP equipment.

  * Changed inefficient hash indexes which caused the logengine (syslog
    analyzer) to run extremely slowly and PostgreSQL to run up an insane server
    load.

  * Fixed bug that occurred spuriously, causing the Prefix Matrix to believe an
    entire network scope was a subnet on its own.

  * makecricketconfig.pl would set strange umask values when writing
    cricket-config, which would cause permission problems and possibly make
    graphs disappear from the Cricket web interface.

  * ... and various other small bugs.


Version 3.1.1
(released 08 November 2006)

 Security fixes:

 * The session mechanism of the web interface contained a potential directory
   traversal vulnerability.  A mitigating factor was that an attacker would
   first need write access to the local file system of the NAV server.  The
   vulnerability was discovered by Jim Gallacher, and is similar to a
   vulnerability discovered in mod_python:
   http://issues.apache.org/jira/browse/MODPYTHON-135

 Bugfixes:

 * getDeviceData no longer attempts to map Cisco submodules into NAV's data
   model.  This solves several Cisco related module problems.

 * Any module without switch ports would erroneously be detected as down when
   the module monitor ran single handedly.  Typically, they would stay marked
   as down for five hours, go up for one hour, then down again for another
   five (#1583453).

 * getDeviceData threads working with equipment that enabled VLANs above 1023
   would crash, causing incomplete information to be collected from these
   devices..  It no longer crashes, but NAV still will not properly support
   more than 1024 vlans (#1518783)

 * getDeviceData should no longer generate repeated, incorrect
   deviceHwVerChanged alerts for HP equipment (#1550393).

 * Fixed bug that would cause a getDeviceData collector thread to crash when a
   device appeared not to support the ifHighSpeed OID.

 * A couple of getDeviceData plugins had NullPointerExceptions.

 * Initial Cricket/makecricketconfig setup was botched after directory
   restructuing.  Makecricketconfig is now more flexible when locating a
   system's cricket installation, and where its config and data are placed.

 * Some SQL errors in EditDB were fixed.

 * Fixed bugs in SNMP getnext handling in EditDB.

 * Fixed an EditDB hardcoded limitation of 10 characters in an IP device's
   orgid field - the database allows up to 30 characters.

 * EditDB would crash when inserting devices that happened to return non-ASCII
   serial numbers.  Non-ASCII serial numbers are now ignored.

 * Removed code from networkDiscovery that attempted to traverse non-routed
   VLANs.  This code was not properly tested, and potentially caused several
   topology related problems.

 * Build/install errors related to Arnold were fixed.

 * A bug caused by hardcoded values in Arnold prevented it from blocking ports
   on equipment of other categories than EDGE, even if it was configured to
   allow this.

 * Status page preferences no longer crashes with a Python traceback
   (#1521695).

 * The Traffic Map admin buttons no longer disappear when the Traffic Map
   applet is reloaded (#1495566).
 
 * The traffic map would never display any load data for links on interfaces
   with spaces in their names (such as ATM interfaces on Cisco devices).

 * The "black load" syndrome of the Traffic Map has been compensated for. 

 * The cam collector would not insert port numbers in cam records unless NAV
   had collected proper ifName/ifDescr values for the ports in question.

 * The pping and servicemon processes now properly perform a double fork and
   detach completely from the controlling terminal when daemonized.  When the
   daemons had been started/restarted in an SSH session, this bug would
   sometimes cause said SSH session to hang on logout.

 * Fixed a bug which rendered NAV's Cheetah templates incompatible with
   Cheetah 2.

 * Various other small bugfixes and cosmetic changes.


Version 3.1.0
(released 30 June 2006)

#####################################################################
##  WARNING  WARNING  WARNING  WARNING  WARNING  WARNING  WARNING  ##
#####################################################################
##                                                                 ##
## This release makes changes to the NAV database. If you are      ##
## upgrading from a previous release you also need to upgrade your ##
## database schema. For information on how to upgrade the database ##
## schema, please take a look in doc/sql/upgrades for more         ##
## information.                                                    ##
##                                                                 ##
#####################################################################

 New features and improvements:

 * Arnold, a subsystem to block users' switch ports by using NAV's
   Machine Tracker data.

 * IP Information Center web tool, displays any information NAV has on
   single IP addresses.

 * Extra tab on IP Device Center to illustrate switch port usage.

 * The IP Device Center will now display a device's software version,
   and a timestamp of the last update made by getDeviceData.  

 * A "refresh" link on the IP Device Center allows the user to trigger
   a new collection run to refresh the device data.

 * l2trace web tool, enables users to trace network paths on layer
   two.

 * Autodiscovery command line tool added to contrib.  This tool will
   try to discover every managed network device within your network,
   and add them to NAV.

 * All logged in users are now considered members of the new system
   group "Authenticated Users".  Minimum privileges for authenticated
   users can be granted to this group.

 * Password hashes stored in the account database are now salted, for
   slightly enhanced security.

 * NAV now supports reading interface speeds from the ifHighSpeed OID,
   thus supporting speeds above 4.2Gbps.

 * Initial db setup now suggests creating only one database user,
   instead of the previous two.

 Bugfixes:

 * Dependency on pysnmp=3.3.5 (the unstable dev branch) has been
   removed, please downgrade to pysnmp 2.

 * EditDB no longer crashes when adding devices that report duplicate
   serial numbers.

 * AlertEngine would crash when concatenating several queued alerts
   into one SMS message.

 * AlertEngine would, under certain circumstances, not delete a user's
   queued alerts, resulting in constant retransmission of the same
   queued alerts.

 * Some improved debug logging in AlertEngine.

 * DNS lookups in getDeviceData are slightly more robust.

 * The cam logger now runs 4 times an hour, as opposed to once every
   hour, which was not a very good default.

 * Missing Traffic Map icons were added.

 * Machine Tracker would crash when doing DNS lookups on inactive host
   searches (#1509944).

Version 3.0.1
(released 28 April 2006)

 Security fixes:

 * The report interface failed to properly sanitize user input,
   potentially allowing for SQL injections.

 Bugfixes:

 * Some modules import python profiling modules that aren't always
   part of the standard distribution.

 * pping would crash if there was no route to a host.

 * SQL Errors in the server and trunked core switch ports reports.

 * Some devices would never be taken off maintenance.

 * The default web greeting still mentioned the word "beta"

 * The SMTP service checker didn't properly extract version
   information from all SMTP server banners.

 * Registering mixed case device names as sysnames or DNS names would
   result in dnsMismatch alerts.

 * dnsMismatch alert text would use the DNS name as both the sysname
   and DNS name values, confusing the receiver as to what the actual
   problem was.

 * getBoksMacs/mactrace would crash under specific, hard to reproduce
   circumstances.

 * There were potential syntax errors in the NAV perl API with newer
   Perl versions.

 * Some NAV processes would not gracefully close database connections
   on exit.

 * Several parts of the web interface would report InterfaceErrors if
   a database connection was temporarily dropped by the database
   server.  Please report any further occurrences of these errors.

 * Newer versions of Firefox would not properly render the table
   graphics of the web interface.

 * The machine tracker would not properly sanitize user input IP
   addresses, leading to strange errors and backtraces in the web
   interface.

 * The Alert Engine would did not delete processed entries from the
   alert queue, which caused the database table to grow indefinitely.

 * Much of the Alert Engine's debug logs were unreadable because they
   referred to many entities by their internal database IDs.
 
 * The type information shipped with NAV incorrectly specified that
   Cisco 3750 and 2970 based devices did not support the cs@vlan
   convention, thus disabling proper CAM table collection from these
   devices.

 * The HTML on the NAV login page would be sent as plain text under
   newer versions of mod_python.


Version 3.0.0
(released 16 September 2005)

 Improvements:

 * Fixed a bug in maintengine which prevented it from doing it's job when the
   database was busy/overloaded.

 * Fixed a bug in the integration between Alert Profiles (PHP) and the Cheetah
   templating system (Python), which would cause the Alert Profiles web
   interface to act up.

 * Character coding information added to all NAV-original Python programs.

 * Fixed a bug which cleared a user's password if the account editing form of
   Useradmin was submitted without changes.

 * NetworkDiscovery now only checks for closed vlans on active ports.

 * Fixed a NullPointerException in getDeviceData.

 * Fixed various problems with Cisco module/submodule translation in
   getDeviceData.

 * Fixed a AlertEngine/getDeviceData combination bug which caused AlertEngine
   to log loads of long error messages on events that lacked an alerttype
   suggestion.

 * New option to have AlertEngine log error messages to a separate error log.

 * AlertEngine now sends error alerts if an alerttype has no configured subject
   line in alertmsg.conf.

 * Added report shortcut to search for strings in prefix-netident (added to the
   front.html config file)

 * Added link from Report to the previously hidden feature "service matrix" of
   the IP Device Center (added to the front.html config file)


Version 3.0_rc2
(released 20 July 2005)

 Improvements:

 * More data for the snmpoid table, please run the new snmpoid.sql to
   ensure your system will work after an upgrade.

 * The Service Monitor's RPC plugin no longer complains loudly to
   stderr.

 * The Messages and Report web interfaces will no longer
   intermittently cross-over mysteriously.

 * The alert message texts have been updated to contain messages for
   all known alerts.

 * Overlapping time periods in an alert profile will no longer cause
   double alerts to be sent.

 * Modules that are down can now actually be found and deleted in the
   Device Management interface.

 * The Traffic Map system and Network Explorer can now be properly
   configured to run without a single NAV root directory.

 * Alert Profiles web pages now include the correct stylesheets, so it
   won't look as funny.

 * Several getDeviceData-related problems were ironed out.

 * The menu on Messages' maintenance list is no longer ugly.

 * IP devices put on maintenance will now be taken off maintenance,
   instead of remaining on maintenance forever.

 * Maintenance-scheduled IP devices can now be properly deleted from
   messages.

 * Next/previous page-links in reports will now work properly even
   when using advanced search options.  Also, advanced searching on
   database fields that contain underscores (like sw_ver) will now
   work.

 * Performance improvements in the IP Device Center.


Version 3.0_rc1
(released 09 June 2005)

#####################################################################
##  WARNING  WARNING  WARNING  WARNING  WARNING  WARNING  WARNING  ##
#####################################################################
##                                                                 ##
## This release makes changes to the NAV database. If you are      ##
## upgrading from a previous release you also need to upgrade your ##
## database schema. For information on how to upgrade the database ##
## schema, please take a look in doc/sql/upgrades for more         ##
## information.                                                    ##
##                                                                 ##
#####################################################################

 Improvements:

 * Eventengine BoxState plugin now uses a queue for boxes down in
   order to ensure that we don't send out boxdown alerts prematurely.

 * The Gwport plugin of getDeviceData has been rewritten and should
   be much more stable (less restarts of gDD necessary).

 * Most of the reports in the report generator have been optimized and
   will display much more quickly than before.

 * Various improvements to Cricket to better cope with changes. This
   should make vlanPlot display the network load more reliably.

 * Send email for boxShadow and boxSunny.

 * WLAN devices are correctly detected as being in shadow.

 * Only allow editing of prefixes where the nettype table says it's
   editable.

 * Attempt to fix several instances of bad HTML markup in the report
   generator, which would break on various browsers.

 * Attempt to get the module number of Cisco devices correct in more
   cases.

 * Handle the case of duplicate module serials in a graceful manner.

 * gDD collects data every 6 hours by default, although the default
   is only for new devices. The collection frequency can be changed by
   setting the 'frequency' field in the netboxsnmpoid table, and the
   default value can be changed in getDeviceData.conf.

 * Add option for setting the logging level for NAV subsystems in
   nav.conf.

 * Try to also discover closed / private VLANs.

 * Support for PIDs > 65535 in pping (typical on FreeBSD).

 * Add a 'monitor' thread to the cam-logger which exits the process
   if it hangs for some reason.

 * Using a separate database server has been tested and all NAV
   subsystems should now support this.


Version 3.0_beta10
(released 11 February 2005)

#####################################################################
##  WARNING  WARNING  WARNING  WARNING  WARNING  WARNING  WARNING  ##
#####################################################################
##                                                                 ##
## This release makes changes to the NAV database. If you are      ##
## upgrading from a previous release you also need to upgrade your ##
## database schema. For information on how to upgrade the database ##
## schema, please take a look in doc/sql/upgrades for more         ##
## information.                                                    ##
##                                                                 ##
#####################################################################

 Improvements:

 * gDD now makes sure to give priority to new devices when its work
   load with old devices is high.
 * gDD now refers to IP Devices by sysname in its logs, making it
   easier to track its actions when reading the logs.
 * gDD now correctly updates the netident of elinks.
 * gDD will now also attempt to extract software version information
   from a device's sysDescr OID (also collects sw_ver for the device
   itself, and not just its modules).
 * A bug that prevented the service monitor's LDAP plugin from
   functioning from time to time was fixed.
 * Router ports that are administratively down are removed from NAVdb
   by gDD.
 * The report generator now supports multi-line and complex SQL
   queries.
 * The SQL queries of the netbox, gw, sw, edge and wlan reports were
   optimized for speed.

 Additions:

 * gDD will now collect memory information from devices.


Version 3.0_beta9
(released 21 January 2005)

 User-visible changes:
 
 * For performance reasons, the WestHawk Java SNMP library has been
   discarded in favor of Java SNMP, which has a nice GPL license and
   doesn't hog resources by creating lots of threads.
 * Machine tracker searches have been redone to be more like in NAV 2,
   due to the complexity of automatic attempts at correlating CAM and
   ARP records.1
 * Makecricketconfig should now generate correct interface
   descriptions for router interfaces in Cricket.
 * The previously disabled Server statistics support of
   Makecricketconfig has ben re-enabled and fixed.
 * Start/stop scripts now use "su -" when switching from root to
   navcron, to reset the environment before starting processes.  This
   may have adverse effects if root has his/her environment variables
   set to locate NAV libraries while the navcron user doesn't.
 * The report system should now correctly count the number of gwports
   registered for a device in NAVdb.
 * Edit database no longer throws exceptions if NAVdb contains
   organizations without descriptions.
 * The default priorities of the web tools have been adjusted.
 * getDeviceData should no longer come out of sync with NAVdb, as it
   no longer works on a memory cache of the NAVdb.
 * getDeviceData no longer deletes prefixes of the 'scope' type (which
   makes the prefix matrix of the Report system work again).
 * Improvements to the module monitor of getDeviceData.
 * Load data is now available in the Traffic map.

Known bugs in this version:

 * getDeviceData will at times seemingly "forget" some IP devices and
   stop retrieving updated information from them.  Until this has been
   fixed, this can be worked around by restarting getDeviceData,
   either on a regular basis, or when inconsistencies between NAVdb
   and the real world are seen.


Version 3.0_beta8
(released 08 November 2004)

#####################################################################
##  WARNING  WARNING  WARNING  WARNING  WARNING  WARNING  WARNING  ##
#####################################################################
##                                                                 ##
## This release makes changes to the NAV database. If you are      ##
## upgrading from a previous release you also need to upgrade your ##
## database schema. For information on how to upgrade the database ##
## schema, please take a look in doc/sql/upgrades for more         ##
## information.                                                    ##
##                                                                 ##
#####################################################################

 User-visible changes:
 * Encoding info has been added to several python modules, to make
   newer versions of Python stop complaining about PEP 0263.  But
   there are probably more modules that need these changes.
 * Attempting to stop not running cron services using the nav command
   will no longer yield a Python exception.
 * Alert profiles containing time periods spanning across midnight
   will now work.
 * Interface names containing more than one forward slash now work
   with makecricketconfig.
 * Added config file cricket-views.conf to define which views
   makecricketconfig will create.
 * Several editdb crash bugs were fixed.
 * Default set of reports (report.conf) were bugfixed.
 * MachineTracker had a serious design flaw in its primary SQL
   statement, which would cause arbitrary and erroneous search result.
   The automatic combination of arp and cam data should now be more
   accurate.
 * When there are no active messages, the annoying "No Found" message
   is no longer displayed on the home page.
 * Some missing icons have been added, and new icons for some tools.
 * Some strange errors on the web were due to small differences in
   mod_python versions used on Apache 1.3 and Apache 2, the ones that
   have been found have been fixed.
 * Tremendous amount of fixes related to the getDeviceData collection
   system, more accurate collection of module information and module
   state, detection of replaced netboxes, etc.
 * Errors in getDeviceData and missing constraints in the database
   would sometimes cause several netboxes and/or several modules to
   refer to the same device and serial number (which is supposed to be
   impossible).  This has been fixed.
 * Improvements to vlanPlot layout, including links to IP device
   center and Network Explorer.  Will now also display an error
   message when contact cannot be establishwith the vPServer, whereas
   previously it would only present a blank screen.
 

Version 3.0_beta7
(released 21 July 2004)

 Changelog for version 3 first created.  This entry contains changes
 since 3.0_beta6.  

#####################################################################
##  WARNING  WARNING  WARNING  WARNING  WARNING  WARNING  WARNING  ##
#####################################################################
##                                                                 ##
## This release makes changes to the NAV database. If you are      ##
## upgrading from a previous release you also need to upgrade your ##
## database schema. For information on how to upgrade the database ##
## schema, please take a look in doc/sql/upgrades for more         ##
## information.                                                    ##
##                                                                 ##
#####################################################################

 User-visible changes:
 * Several fixes to the web interface makes it compatible with Apache
   2 and mod_python 3.  Example config for Apache 2 included in
   doc/apache.
 * Syslog Analyzer ported/rewritten from NAV v2 (then known as navlog).
 * Subnet usage matrix ported/rewritten from NAV v2.
 * editDB can now edit cabling and patch information.
 * Improvements to the editDB interface:
   - Fixed typos.
   - Simplified a few procedures.
   - Clarified cryptic field names.
   - Red asterisks mark required form fields.
   - Can control groupings used in vlanPlot.
 * Improvements to the messages interface.
 * References to the eMotd subsystem have been changed to messages.
 * vlanPlot applet is now displayed inside the NAV web framework
   template.
 * The nav command will complain verbosely if it cannot import the
   nav.startstop module.
 * Lots of "hehe" fixes by stain.
 * The following utilities have been added:
   - dump.py to dump live database content into bulk import-ready text
     files.
   - navclean.py to delete old/expired cam- and arp records from the
     database.
 * pg_backup.pl translated to English and rewritten to work with NAV
   v3.  Example config included.
 * The user adminstration panel now has it's own entry in the toolbox.
 * Visibility improvements to vlanPlot and Network Explorer.
 * Some bugfixes related to getDeviceData's collection of information.
