{% block base_header %}

<!DOCTYPE html>
<html>

{# FIXME Hardcoded urls #}

{% block base_header_head %}
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block base_header_title %}{{ title }}{% endblock %}</title>
    <link rel="stylesheet" href="/static/css/nav.css" />
    <link rel="stylesheet" href="/style/custom.css" />
    <link rel="stylesheet" href="/style/calendar.css" />
    <link rel="stylesheet" href="/style/treeselect.css" />
    <link rel="stylesheet" href="/style/quickselect.css" />
    <link rel="stylesheet" href="/style/table.css" />
    <link rel="stylesheet" href="/style/tabs.css" />
    <link rel="stylesheet" href="/style/foundation_icon_fonts/stylesheets/general_foundicons.css" />
    <script type="text/javascript" src="/js/require_config.js"></script>
    <script src="/js/libs/require.js" data-main='src/main'></script>
    {% block base_header_additional_head %}
    {% endblock %}
</head>
{% endblock %}


{% block base_body_start %}
<body>
{% endblock %}


{% comment %} TOP BAR {% endcomment %}
<nav class="top-bar">
    <ul class="title-area">
        <li>
            <h1 class="name">
                <a href="/">
                    <img src="/images/main/navlogo.png" title="Network Administration Visualized" alt="Network Administration Visualized">
                </a>
            </h1>
        </li>
        <li class="toggle-topbar menu-icon">
            <a href="#"><span>Menu</span></a>
        </li>
    </ul>


    <section class="top-bar-section">
        <ul class="left">
            <li class="has-form search">
                <form action="/info/" method="get">
                    <div class="row collapse">
                        <div class="small-10 columns">
                            <input id="query" type="text" name="query" maxlength="100"/>
                        </div>
                        <div class="small-2 columns">
                            <input class="button" type="submit" value="Search" />
                        </div>
                    </div>
                </form>
            </li>
        </ul>

        <ul class="right">
            <li class="has-dropdown"><a href="{% url webfront-preferences-navigation %}">Your links</a>
                <ul class="dropdown">
                    {% for link in current_user_data.navbar %}
                        <li><a href="{{ link.uri }}">{{ link.name }}</a></li>
                    {% endfor %}
                </ul>
            </li>

            <li class="has-dropdown"><a href="{% url webfront-toolbox %}">Your tools</a>
                <ul id="toolboxdropdown" class="dropdown">
                    {% for tool in current_user_data.tools %}
                        {% if tool.display %}
                            <li>
                                <a href="{{ tool.uri }}">
                                    <img src="{{ tool.icon }}" alt="{{ tool.name }}">
                                    {{ tool.name }}
                                </a>
                            </li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </li>

            <li><a href="#">Documentation</a></li>
            {% if current_user_data.account.is_default_account %}
                <li>
                    <a class="navbar login button" href="/index/login">Login</a>
                </li>
            {% else %}
                <li>
                    <a class="navbar logout button" href="/index/logout">Logout {{ current_user_data.account.login }}</a>
                </li>
            {% endif %}
        </ul>
    </section>
</nav>

{% if current_user_data.sudoer %}
    <div class="sudoer-bar">
        <form action="{% url webfront-logout %}" method="post">
            <img src="/images/main/emblem-important.png"
                 alt="Important information"/>
            Hi <em>{{ current_user_data.sudoer.name }}</em>, you are currently
            logged in as <em>{{ current_user_data.account.name }}</em>.
            <input type="submit" name="submit_desudo" value="Log back in as {{ current_user_data.sudoer.login }}" class="button secondary small"/>
        </form>
    </div>
{% endif %}

{% comment %} BREADCRUMB {% endcomment %}
<div class="row">

    <div class="large-12 columns">
        <ul id="nav-breadcrumbs" class="breadcrumbs">
            {% for title, url in navpath %}
                {% if url %}
                    <li><a href="{{ url }}">{{ title }}</a></li>
                {% else %}
                    <li class="unavailable"><a href="#">{{ title }}</a></li>
                {% endif %}
            {% endfor %}
        </ul>
    </div>

</div>

{% endblock base_header %}

{% comment %} MAIN CONTENT {% endcomment %}
{% block base_navbody_start %}
<div class="row">
    <div class="large-12 columns">
        <div class="navbody">
{% endblock %}

    {% block base_content %}
    {% endblock %}

{% block base_navbody_end %}
        </div>
    </div>
</div>
{% endblock %}

{% block base_footer %}
<hr />

<footer class="row">
    <div class="large-4 columns">
        <h5 class="subheader">NAV Version</h5>

        <p>
            <a href="/about/">Network Administration Visualized</a>
            <br/>
            {{ nav_version }}
        </p>


        <p>
            {% if current_user_data.account.is_default_account %}
                You are not logged in.
            {% else %}
                You are logged in as <a href="/userinfo/">{{ current_user_data.account.name }}</a>.
            {% endif %}
        </p>
    </div>

    <div class="large-4 columns">
        <h5 class="subheader">External links</h5>
        {{ external_links|safe }}
    </div>

    <div class="large-4 columns">
        <h5 class="subheader"
                >Contact information</h5>
        {{ contact_information|safe }}
    </div>
</footer>


</body>
</html>

{% endblock base_footer %}
