{% extends "machinetracker/base.html" %}

{% block content %}

    <form action="{% url machinetracker-swp %}" method="get">
        <div id="search_form" class="row">
            <div class="large-8 column">
                <table class="listtable expand">
                    <caption>Switch search</caption>
                    <tbody>
                        <tr>
                            <th><label for="id_switch">Switch</label></th>
                            <td {% if form.switch.errors %}class="error"{% endif %} >
                                {{ form.switch }}
                                {% if form.switch.errors %}
                                    <small class="nomargin">{{ form.switch.errors }}</small>
                                {% endif %}
                            </td>

                            <th><label for="id_hide">Only active</label></th>
                            <td><input id="id_hide" type="checkbox" name="days" value="-1" onclick="document.getElementById('id_days').disabled = this.checked;" /></td>
                        </tr>

                        <tr>
                            <th><label for="id_module">Module</label></th>
                            <td {% if form.module.errors %}class="error"{% endif %}>
                                <small class="nomargin">{{ form.module.errors }}</small>
                                {{ form.module }}
                            </td>

                            <th><label for="id_days">Days</label></th>
                            <td {% if form.days.errors %}class="error"{% endif %}>
                                <small class="nomargin">{{ form.days.errors }}</small>
                                {{ form.days }}
                            </td>
                        </tr>

                        <tr>
                            <th><label for="id_port">Port</label></th>
                            <td {% if form.port.errors %}class="error"{% endif %}>
                                <small class="nomargin">{{ form.port.errors }}</small>
                                {{ form.port }}
                            </td>
                            <td colspan="2"><input type="submit" value="Search" class="button small right"/></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="large-4 column">
                <a href="#" data-reveal-id="valid-search-terms" title="Help"
                   class="button small right">Help</a>
            </div>

        </div>
    </form>

{% if mac_tracker %}
    <div class="results">
        {% include "machinetracker/mac_tracker.html" %}
    </div>
{% else %}

<div id="valid-search-terms" class="reveal-modal">
    <h4>Search Hints</h4>
    <ul>
        <li>
            Switch search will search for switches having a sysname that starts
            with whatever you enter as switch name.  E.g. searching for
            &quot;<tt>blapp-sw</tt>&quot; will retrieve both
            &quot;<tt>blapp-sw.ntnu.no</tt>&quot; and
            &quot;<tt>blapp-sw2.ntnu.no</tt>&quot;
        </li>
        <li>
            Leaving the <i>module</i> or <i>interface</i> fields empty in the
            switch search will find any module or interface that have matching
            records for your selected switch.
        </li>
    </ul>
</div>

{% endif %}

{% endblock content %}
