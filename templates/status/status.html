{% extends "status/base.html" %}

{% block base_header_additional_head %}
    <meta http-equiv="refresh" content="30" />
{% endblock %}

{% block content %}

{% for section in sections %}
<table class="listtable">
    <caption>
        {{ section.prefs.name }}<br />
        <span class="subtitle">
        ({{ section.type_title }})
        <a href="{{ section.devicehistory_url }}">history</a>
        </span>
    </caption>

    <thead>
        <tr>
        {% for head in section.columns %}
            <th>{{ head }}</th>
        {% endfor %}
        </tr>
    </thead>

    {% if section.history %}
        <tbody>
        {% for row in section.history %}
            <tr class="{% cycle 'oddrow' 'evenrow' %}">
                {% for name, url in row.tabrow %}
                <td>
                    {% if url %}
                    <a href="{{ url }}">
                    {% endif %}
                    {{ name }}
                    {% if url %}
                    </a>
                    {% endif %}
                </td>
                {% endfor %}
                {% ifequal section.devicehistory_type "a_boxDown" %}
                <td>
                    <form action="{% url maintenance-add-netbox %}" method="POST">
                    <input type="hidden" name="netboxid" value="{{row.netboxid}}"/>
                    <input type="submit" value="Put on mainteance"
                            title="Set this device on maintenance until it is up and running again."/>
                    </form>
                </td>
                {% endifequal %}
            </tr>
        {% endfor %}
        </tbody>
    {% endif %}
</table>
{% endfor %}

{% endblock %}
