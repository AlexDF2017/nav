{% extends "portadmin/base.html" %}

{% block content %}

<div id="infobox" class="infobox right">
	<h4>Available vlans</h4>
	
	<ul>
	{% for vlan, netident in netidents %}
		<li>{{ vlan }} - {{ netident }}</li>
	{% endfor %}
	</ul>

</div>

{% if swports %}

<input type="button" class="saveall_button" value="Save all" onclick="bulk_save()"/>

<table id="portadmin-interfacecontainer" class="vertitable">
	<caption><a href="/ipdevinfo/{{netbox.sysname}}">{{netbox.sysname}}</a></caption>
	<tr>
		<th class="ifname">Name</th>
		<th class="ifalias">Alias</th>
		<th class="vlan">Vlan</th>
		<th class="button">&nbsp;</th>
	</tr>
  
	{% for swport in swports %}
	<tr id="{{ swport.id }}">
		<td>{{ swport.ifname }}</td>

		<td>
			{% if swport.iseditable %}
			<input class="ifalias" type="text" value="{{ swport.ifalias }}" />
			{% else %}
			{{ swport.ifalias }}
			{% endif %}
		</td>

		<td>
			{% if swport.trunk %}
			Trunk
			{% else %}
				{% if swport.iseditable %}
					<select class="vlanlist" name="{{ swport.ifname }}">
						{% for vlan in allowed_vlans %}
							{% ifequal swport.vlan vlan %}
							<option value="{{ vlan }}" selected="selected">{{ vlan }}</option>
							{% else %}
							<option value="{{ vlan }}">{{ vlan }}</option>
							{% endifequal %}
						{% endfor %}
					</select>
				{% else %}			
					{{swport.vlan}}
				{% endif %}
			{% endif %}
		</td>

		<td>
			{% if swport.iseditable %}
			<img src="/images/portadmin/save.png" alt="Save" title="Save" onclick="save_row({{ swport.id }})"/>
			{% endif %}
		</td>
	</tr>
	{% endfor %}
</table>

<input type="button" class="saveall_button" value="Save all" onclick="bulk_save()"/>
	
{% endif %}

{% endblock %}

