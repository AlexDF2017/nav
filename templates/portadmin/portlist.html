{% extends "portadmin/base.html" %}
{% load portadmin %}

{% block content %}


{% if swports %}

<div id="infoboxcontainer" class="left">

	{% if ifaliasformat %}
	<div class="infobox">
		{% include "portadmin/aliasformat.html" %}
	</div>
	{% endif %}
	
	<div id="infobox" class="infobox">
		<h4>Available vlans for {{ account.login }}@{{ netbox.get_short_sysname }}</h4>
		
		<ul>
		{% for vlan, netident in netidents %}
			<li>{{ vlan }} - {{ netident }}</li>
		{% endfor %}
		</ul>
	
	</div>
</div>

<div id="tablecontainer" class="text-right">
<table id="portadmin-interfacecontainer" class="vertitable">
	<caption><a href="/ipdevinfo/{{netbox.sysname}}">{{netbox.sysname}}</a></caption>
	<tr>
		<th class="ifname">Name</th>
		<th class="adminstatus" title="AdminStatus - If red the interface is down">A</th>
		<th class="operstatus" title="OperStatus - If red there is no link on the interface">O</th>
		<th class="ifalias">Alias</th>
		<th class="vlan">Vlan</th>
		<th class="button">&nbsp;</th>
	</tr>
  
   	{% for swport in swports %}
	<tr id="{{ swport.id }}">
		<td>{{ swport.ifname }}</td>

		<td class="text-center"><img src="/images/lys/{{ swport.ifadminstatus|drawLight }}" /></td>
		<td class="text-center"><img src="/images/lys/{{ swport.ifoperstatus|drawLight }}" /></td>
		
		<td>
			{% if swport.iseditable %}
			<input class="ifalias" type="text" value="{{ swport.ifalias }}" />
			{% else %}
			{{ swport.ifalias }}
			{% endif %}
		</td>

	

		<td>
			{% if swport.trunk %}
			Trunk
			{% else %}
				{% if swport.iseditable %}
					<select class="vlanlist" name="{{ swport.ifname }}">
						{% for vlan in allowed_vlans %}
							{% ifequal swport.vlan vlan %}
							<option value="{{ vlan }}" selected="selected">{{ vlan }}</option>
							{% else %}
							<option value="{{ vlan }}">{{ vlan }}</option>
							{% endifequal %}
						{% endfor %}
					</select>
				{% else %}			
					{{swport.vlan}}
				{% endif %}
			{% endif %}
		</td>

		<td>
			{% if swport.iseditable %}
			<img src="/images/portadmin/save.png" class="hidden" alt="Save" title="Save" onclick="save_row({{ swport.id }})"/>
			{% endif %}
		</td>
	</tr>
	{% endfor %}
</table>

<input type="button" class="saveall_button" value="Save all" onclick="bulk_save()"/>
</div>

<input type="button" class="saveall_button" value="Save all" onclick="bulk_save()"/>

{% endif %}

{% endblock %}

