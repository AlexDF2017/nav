{% extends "info/room/base.html" %}

{% block roominfo %}

    <div class="horizontal-button-list">
        <a href="{% url seeddb-room-edit room.id %}"><span class="edit">Edit room</span></a>
        <a href="{% url room-info-upload room.id %}"><span class="photo">Edit images</span></a>
        <a href="{% url maintenance-new-room room.id %}"><span class="maintenance">Schedule Maintenance</span></a>
        <a href="{% url devicehistory-view-room room.id %}"><span class="history">View room history</span></a>
    </div>

    <div id="infotabs" class="ui-helper-hidden">
        <ul>
            <li><a href="#roominfo">Room info</a></li>
            <li><a href="#deviceinfo">Device info</a></li>
            <li><a href="{% url room-info-netboxes room.id %}" title="netboxinterfaces">Netbox interfaces <span class="tab-spinner">&nbsp;</span></a></li>
        </ul>

        <div id="roominfo">
            <table id="roominfotable" class="listtable">
                <caption>Roominfo</caption>
                <thead>
                <tr>
                    <th>Location</th>
                    <th>Description</th>
                    <th>opt1</th>
                    <th>opt2</th>
                    <th>opt3</th>
                    <th>opt4</th>
                    <th>Position</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td><a href="/report/location?locationid={{ room.location.id }}">{{ room.location.description }}</a></td>
                    <td>{{ room.description }}</td>
                    <td>{{ room.optional_1|urlize }}</td>
                    <td>{{ room.optional_2|urlize }}</td>
                    <td>{{ room.optional_3|urlize }}</td>
                    <td>{{ room.optional_4|urlize }}</td>
                    <td class="position" data-roomname="{{ room.id }}">
                        {% if room.position %}{{ room.position|join:', ' }}{% endif %}
                    </td>
                </tr>
                </tbody>
            </table>


            {% if images|length > 0 %}
                <div class="slider-wrapper theme-default">
                    <div id="slider" class="nivoSlider">
                        {% for image in images %}
                            <a href="/uploads/images/rooms/{{ image.path }}/{{ image.name }}">
                                <img src="/uploads/images/rooms/{{ image.path }}/{{ image.name }}"
                                     data-thumb="/uploads/images/rooms/{{ image.path }}/thumbs/{{ image.name }}"
                                     title="#{{ image.id }}" />
                            </a>
                        {% endfor %}
                    </div>
                </div>

                {% comment %} To support html captions we need to create an element for each image {% endcomment %}
                {% for image in images %}
                    <div id="{{ image.id }}" class="nivo-html-caption">
                        {{ image.title|safe }}
                    </div>
                {% endfor %}

            {% endif %}

{% comment %}
            <div id="room_map" class="smallmap"></div>
            <div id="coordinates"></div>
{% endcomment %}

        </div>

        <div id="deviceinfo">
            <table id="deviceinfotable" class="listtable">
                <caption>Netboxes</caption>
                <thead>
                <tr>
                    <th>Name</th>
                    <th>IP-address</th>
                    <th>Category</th>
                    <th>Type</th>
                    <th>Organization</th>
                    <th>#swp</th>
                    <th>#gwp</th>
                    <th>Up</th>
                    <th>Availability (week)</th>
                </tr>
                </thead>
                <tbody>
                {% for netbox in all_netboxes %}
                <tr class="{% cycle "oddrow" "evenrow" %}">
                    <td><a href="{% url ipdevinfo-details-by-name netbox.sysname %}">{{ netbox.sysname }}</a></td>
                    <td>{{ netbox.ip }}</td>
                    <td><a href="/report/netbox?catid={{ netbox.category.id }}">{{ netbox.category.id }}</a></td>
                    <td><a href="/report/netbox?typeid={{ netbox.type.id }}">{{ netbox.type.name }}</a></td>
                    <td><a href="/report/netbox?orgid={{ netbox.organization.id }}">{{ netbox.organization.description }}</a></td>
                    <td><a href="/report/swport?netboxid={{ netbox.id }}">{{ netbox.get_swports|length }}</a></td>
                    <td><a href="/report/gwport?netboxid={{ netbox.id }}">{{ netbox.get_gwports|length }}</a></td>
                    <td><img src="/images/lys/{% if netbox.up == 'y' %}green.png{% else %}red.png{% endif %}"></td>
                    <td class="numeric">{{ netbox.availability }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        <div id="netboxinterfaces"></div>

    </div>

{% endblock %}

