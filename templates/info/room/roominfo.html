{% extends "info/room/base.html" %}

{% block base_header_title %}
    NAV - Room view {% if room.id %}- {{ room.id }}{% endif %}
{% endblock %}

{% block roominfo %}

    <div id="infotabs" class="ui-helper-hidden">
        <ul>
            <li><a href="#roominfo">Room info</a></li>
            <li><a href="#deviceinfo">Device info</a></li>
            <li><a href="{% url room-info-netboxes room.id %}" title="netboxinterfaces">Netbox interfaces <span class="tab-spinner"></span></a></li>
        </ul>

        <div id="roominfo">
            <table id="roominfotable" class="listtable">
                <caption>Roominfo</caption>
                <thead>
                <tr>
                    <th>Location</th>
                    <th>Description</th>
                    <th>opt1</th>
                    <th>opt2</th>
                    <th>opt3</th>
                    <th>opt4</th>
                    <th>Position</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td><a href="/report/location?locationid={{ room.location.id }}">{{ room.location.description }}</a></td>
                    <td>{{ room.description }}</td>
                    <td>{{ room.optional_1 }}</td>
                    <td>{{ room.optional_2 }}</td>
                    <td>{{ room.optional_3 }}</td>
                    <td>{{ room.optional_4 }}</td>
                    <td class="position" data-roomname="{{ room.id }}">
                        {% if room.position %}{{ room.position|join:', ' }}{% endif %}
                    </td>
                </tr>
                </tbody>
            </table>

            <div id="room_map" class="smallmap"></div>

        </div>

        <table id="deviceinfo" class="listtable">
            <caption>Netboxes</caption>
            <thead>
            <tr>
                <th>Name</th>
                <th>IP-address</th>
                <th>Category</th>
                <th>Type</th>
                <th>Organization</th>
                <th>#swp</th>
                <th>#gwp</th>
                <th>Up</th>
                <th>Availability (week)</th>
            </tr>
            </thead>
            <tbody>
            {% for netbox in all_netboxes %}
                <tr>
                    <td><a href="{% url ipdevinfo-details-by-name netbox.sysname %}">{{ netbox.sysname }}</a></td>
                    <td>{{ netbox.ip }}</td>
                    <td><a href="/report/netbox?catid={{ netbox.category.id }}">{{ netbox.category.id }}</a></td>
                    <td><a href="/report/netbox?typeid={{ netbox.type.id }}">{{ netbox.type.name }}</a></td>
                    <td><a href="/report/netbox?orgid={{ netbox.organization.id }}">{{ netbox.organization.description }}</a></td>
                    <td><a href="/report/swport?netboxid={{ netbox.id }}">{{ netbox.get_swports|length }}</a></td>
                    <td><a href="/report/gwport?netboxid={{ netbox.id }}">{{ netbox.get_gwports|length }}</a></td>
                    <td><img src="/images/lys/{% if netbox.up == 'y' %}green.png{% else %}red.png{% endif %}"></td>
                    <td class="numeric">{{ netbox.availability }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>

        <div id="netboxinterfaces"></div>

    </div>

{% endblock %}

