<div class="netmapWidget">
    <div class="header{{#unless isWidgetCollapsible}} no_collapse{{/unless}}">
        <div class="header"><div class="title no-icon">Link info</div></div>
    </div>
    <div class="body">
        {{#if l3 }}
            {{! Layer 3 template here.  }}
            <span class="uplink_netbox"><a class="uplink_netbox_link" href="{{ link.source.ipdevinfo_link }}">{{ link.source.sysname }}</a></span>
            <span class="uplink_netbox"><a class="uplink_netbox_link" href="{{ link.target.ipdevinfo_link }}">{{ link.target.sysname }}</a></span>
            {{#each link.edges}}
                {{! this.id is an netmap.models.Vlan FYI }}
                <div class="uplink_prefix">
                    <h4>{{ this.id.net_ident }}</h4>
                    <span class="prefix_description">{{ this.id.description }}</span>

                        {{#each this.edges}}
                            <div>
                                <div>
                                    <div class="prefix"><a href="{{ this.prefix.report_link }}">{{ this.prefix.net_address }}</a>
                                            <div class="toggleUplink">[+]
                                                <div class="linkSource">
                                                    <div class="uplink_netbox">{{ this.source.netbox.sysname }}</div>
                                                    <div>
                                                        {{#if this.source.interface}}
                                                            {{#if this.source.interface.ipdevinfo_link }}
                                                                <a href="{{ this.source.interface.ipdevinfo_link }}">{{ this.source.interface.ifname }}</a>
                                                            {{else}}
                                                                {{ this.source.interface.ifname }}
                                                            {{/if}}
                                                          {{ else }}
                                                            N/A
                                                        {{/if}}
                                                    </div>
                                                    <div>{{ this.source.gw_ip }}</div>
                                                    <div>{{ this.source.virtual }}</div>
                                                </div>
                                                <div class="linkSource">
                                                    <div class="uplink_netbox">{{ this.target.netbox.sysname }}</div>
                                                    <div>
                                                        {{#if this.target.interface}}
                                                            {{#if this.target.interface.ipdevinfo_link }}
                                                                <a href="{{ this.target.interface.ipdevinfo_link }}">{{ this.target.interface.ifname }}</a>
                                                            {{else}}
                                                                {{ this.target.interface.ifname }}
                                                            {{/if}}
                                                          {{ else }}
                                                            N/A
                                                        {{/if}}
                                                    </div>
                                                    <div>{{ this.target.gw_ip }}</div>
                                                    <div>{{ this.target.virtual }}</div>
                                                </div>
                                            </div>

                                    </div>
                                </div>
                            </div>
                        {{/each}}
                </div>
            {{/each}}
        {{else}}
            {{! Layer 2 template here.  }}
            <div>
                <span class="uplink_netbox"><a class="uplink_netbox_link" href="{{link.source.ipdevinfo_link}}">{{link.source.sysname}}</a></span> - <span class="uplink_netbox"><a class="uplink_netbox_link" href="{{link.target.ipdevinfo_link}}">{{link.target.sysname}}</a></span>
                {{#each link.edges}}
                    <div class="uplink_this uplink">
                        {{#if this.source.interface.ipdevinfo_link}}
                            <span class="uplink_interface">[<a class="uplink_interface_link" href="{{this.source.interface.ipdevinfo_link}}">{{this.source.interface.ifname}}</a>]</span>
                        {{else}}
                            <span class="uplink_interface">[{{#if this.source.interface}}{{this.source.interface.ifname}}{{else}}N/A{{/if}}]</span>
                        {{/if}}
                        {{#if this.target.interface.ipdevinfo_link}}
                            <span class="uplink_interface">[<a class="uplink_interface_link" href="{{this.target.interface.ipdevinfo_link}}">{{this.target.interface.ifname}}</a>]</span>
                        {{else}}
                            <span class="uplink_interface">[{{#if this.target.interface}}{{this.target.interface.ifname}}{{else}}N/A{{/if}}]</span>
                        {{/if}}

                        <div>link_speed: {{ this.link_speed }}</div>
                        <span style="background: rgb(84,255,0); width:30px; height:16px;">50%</span>
                        <span style="background: rgb(84,255,0); width:30px; height:16px;">80%</span>

                    </div>
                {{/each}}
        {{/if}}
        </div>
        <br />
    </div>
</div>